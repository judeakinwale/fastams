{"version":3,"file":"static/js/850.46964cd7.chunk.js","mappings":"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","sources":["axios-Instance/index.js","axios-Instance/constants.js","modules/QRCode/Clockin/hooks/index.js","modules/QRCode/Clockin/index.js","webpack://amsweb/./src/modules/QRCode/Clockin/styles.module.css?9b4e"],"sourcesContent":["import axios from \"axios\";\nimport { baseURL } from \"./constants\";\n\nconst config = { baseURL: baseURL };\nexport const axiosInstance = axios.create(config);\n","// export const baseURL = \"https://pyams.azurewebsites.net/api/v1\";\nexport const baseURL = \"https://impactlife.azurewebsites.net/api/v1\";\n// export const baseURL = \"https://qrcodeattendance.azurewebsites.net/api\";\n","import { axiosInstance } from \"../../../../axios-Instance\";\nimport {  useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { getLoginToken } from \"../../../../storage\";\nimport { errorAlert, toastOptions } from \"../../../../utils\";\nimport { toast } from \"react-toastify\";\nimport { queryKeys } from \"../../../../react-query/constants\";\n\n\nasync function userClockin(formData) {\n  const data = await axiosInstance({\n    url: `/attendance/sign-in-qr?content=${formData.qrCode}&long=${formData.long}&lat=${formData.lat}`,\n    method: \"POST\",\n    \n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n     \n    },\n  });\n\n  return data?.data;\n}\n\n\n\nasync function getAttendance() {\n  const data = await axiosInstance({\n    url: \"/Attendance/UserAttendStatus\",\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${getLoginToken()}`,\n    },\n  });\n\n  return data?.data;\n}\n\n\n\nexport function useClockin() {\n  const queryClient = useQueryClient();\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userClockin(formData),\n    onSuccess: () => {\n      toast.success(\"Clock in successfull\", toastOptions);\n      queryClient.invalidateQueries([queryKeys.clockIn]);\n    },\n    onError: (error) => {\n        errorAlert(error, toastOptions);\n    },\n  });\n \n  return { mutate, isError, error, isSuccess, reset };\n}\n\nexport function useGetAttendance() {\n  const fallback = [];\n  const { data = fallback } = useQuery({\n    queryKey: [queryKeys.clockIn],\n    queryFn: () => getAttendance(),\n    onError: (error) => {\n      \n      toast.error(error, toastOptions);\n    },\n  });\n  return data;\n}\n","import { useIsMutating } from \"@tanstack/react-query\";\nimport React, { useEffect, useState } from \"react\";\nimport { QrReader } from \"react-qr-reader\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { PrivatePaths } from \"../../../routes/path\";\nimport { useClockin } from \"./hooks\";\nimport styles from \"./styles.module.css\";\nimport logo from \"../../../assets/logo.jpeg\";\nimport { Loader } from \"../../../components\";\n\nconst Clockin = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [data, setData] = useState(null);\n  const [useFrontCamera, setUseFrontCamera] = useState(false);\n\n  const { mutate, reset, isSuccess, isError } = useClockin();\n  const isLoading = useIsMutating();\n  const navigate = useNavigate();\n\n  const handleCameraSwitch = () => {\n    setUseFrontCamera(!useFrontCamera);\n    setData(null);\n\n    setErrors({});\n  };\n\n  const submitHandler = () => {\n    const qrData = { ...formData, qrCode: data };\n\n    mutate(qrData);\n  };\n\n  if (isSuccess) {\n    reset();\n    navigate(PrivatePaths.HOME);\n  }\n\n  if (isError) {\n    navigate(PrivatePaths.HOME);\n  }\n\n  useEffect(() => {\n    const getLocation = () => {\n      if (!navigator.geolocation) {\n        setErrors({\n          ...errors,\n          location: \"Geolocation is not supported by your browser\",\n        });\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setFormData({\n              ...formData,\n              long: position.coords.longitude.toString(),\n              lat: position.coords.latitude.toString(),\n            });\n          },\n          () => {\n            setErrors({\n              ...errors,\n              location: \"Unable to retrieve your location\",\n            });\n          }\n        );\n      }\n    };\n    getLocation();\n  }, [errors, formData]);\n\n  if (!formData[\"lat\"] || !formData[\"long\"]) {\n    return <h1>Please turn on your location</h1>;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.logoContainer}>\n        <Link to={PrivatePaths.HOME}>\n          <img src={logo} alt=\"logo\" />\n        </Link>\n        {/* <AARanoLogo /> */}\n      </div>\n\n      <div className={styles.qrCode}>\n        {data ? null : (\n          <QrReader\n            onResult={(result, error) => {\n              if (!!result) {\n                console.log(result, \"result\");\n                setData(result?.text);\n                const qrData = { ...formData, qrCode: result?.text };\n                mutate(qrData);\n              }\n\n              if (!!error) {\n                console.info(error);\n                setErrors({\n                  ...errors,\n                  QrReader: error,\n                });\n              }\n            }}\n            constraints={{\n              facingMode: useFrontCamera ? \"user\" : \"environment\",\n            }}\n            style={{ height: \"100px\", width: \"30%\" }}\n          />\n        )}\n\n        <div\n          style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}\n        >\n          <button className={styles.btnContainer} onClick={handleCameraSwitch}>\n            Switch Camera ({useFrontCamera ? \"Back\" : \"Front\"})\n          </button>\n        </div>\n      </div>\n\n      {data && (\n        <div className={styles.result}>\n          <h4>\n            Scanned code :<span style={{ color: \"black\" }}> {data}</span>\n          </h4>\n        </div>\n      )}\n      {Boolean(isLoading) && <Loader />}\n      {/* {data && (\n        <button\n          disabled={isLoading ? true : false}\n          className={styles.btnContainer}\n          onClick={submitHandler}\n        >\n          {isLoading ? \"Verifying ...\" : \"Clock In\"}\n        </button>\n      )} */}\n    </div>\n  );\n};\n\nexport default Clockin;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"styles_container__B+Po3\",\"qrCode\":\"styles_qrCode__l9wVC\",\"btnContainer\":\"styles_btnContainer__WZKTJ\",\"result\":\"styles_result__uA2DE\",\"logoContainer\":\"styles_logoContainer__UxVta\",\"imgContainer\":\"styles_imgContainer__jjjBQ\",\"home\":\"styles_home__3lA8v\",\"logo\":\"styles_logo__LLS9j\",\"yellow\":\"styles_yellow__aWFoT\"};"],"names":["config","baseURL","axiosInstance","axios","_userClockin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","data","wrap","_context","prev","next","url","concat","qrCode","long","lat","method","headers","sent","abrupt","stop","apply","arguments","_getAttendance","_callee2","_context2","Authorization","getLoginToken","useClockin","queryClient","useQueryClient","_useMutation","useMutation","mutationFn","_x","userClockin","onSuccess","toast","toastOptions","invalidateQueries","queryKeys","onError","error","errorAlert","mutate","isError","isSuccess","reset","useGetAttendance","_useQuery","useQuery","queryKey","queryFn","getAttendance","_useQuery$data","_useState","useState","_useState2","_slicedToArray","setFormData","_useState3","_useState4","errors","setErrors","_useState5","_useState6","setData","_useState7","_useState8","useFrontCamera","setUseFrontCamera","_useClockin","isLoading","useIsMutating","navigate","useNavigate","PrivatePaths","useEffect","navigator","geolocation","getCurrentPosition","position","_objectSpread","coords","longitude","toString","latitude","location","_jsxs","className","styles","children","_jsx","Link","to","src","logo","alt","QrReader","onResult","result","console","log","text","qrData","info","constraints","facingMode","style","height","width","display","justifyContent","onClick","color","Boolean","Loader"],"sourceRoot":""}