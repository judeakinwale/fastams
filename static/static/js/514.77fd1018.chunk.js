"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[514],{8424:function(t,r,e){e.d(r,{F_:function(){return K},Io:function(){return A},PU:function(){return F},Qp:function(){return L},Qq:function(){return P},WY:function(){return q},XZ:function(){return C},Y4:function(){return D},_z:function(){return B},ip:function(){return z},m3:function(){return N},vw:function(){return H},w4:function(){return T},zz:function(){return U}});var n=e(4165),a=e(5861),u=e(2805),i=e(2917),o=e(6403),s=e(3418),c=e(8096),l=e(749),p=e(5985),d=e(6414);function f(){return(f=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return h=(0,a.Z)((0,n.Z)().mark((function t(){var r,e,a=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:new Date,t.next=3,(0,u.b)({url:"/user/absent?date=".concat(r.toISOString()),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 3:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 5:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/admin",method:"POST",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/attendance",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings/".concat(r),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location",method:"POST",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){return(E=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location/".concat(r),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,c.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){var t=(0,i.a)({queryKey:[d.a.attendance],queryFn:function(){return function(){return b.apply(this,arguments)}()},onError:function(t){p.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function T(){var t=(0,i.a)({queryKey:[d.a.user],queryFn:function(){return function(){return f.apply(this,arguments)}()},onError:function(t){p.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=(0,i.a)({queryKey:[d.a.user,t.toLocaleDateString()],queryFn:function(){return function(){return h.apply(this,arguments)}(t)},onError:function(t){p.Am.error(t,l.HK)}}),e=r.data;return void 0===e?[]:e}function F(t){var r=(0,i.a)({queryKey:[d.a.user,t],queryFn:function(){return function(t){return m.apply(this,arguments)}(t)}}),e=r.data;return void 0===e?{}:e}function A(){var t=(0,o.NL)(),r=(0,s.D)({mutationFn:function(t){return function(t){return v.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([d.a.user])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function K(){var t=(0,o.NL)(),r=(0,s.D)({mutationFn:function(t){return function(t){return y.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([d.a.user])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function q(){var t=(0,s.D)({mutationFn:function(t){return function(t){return x.apply(this,arguments)}(t)},onError:function(t){(0,l.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}function D(){var t=(0,i.a)({queryKey:[d.a.settings],queryFn:function(){return function(){return Z.apply(this,arguments)}()},onError:function(t){p.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function H(t){var r=(0,i.a)({queryKey:[d.a.settings,t],queryFn:function(){return function(t){return g.apply(this,arguments)}(t)}}),e=r.data;return{data:void 0===e?{}:e,isSuccess:r.isSuccess}}function L(){var t=(0,o.NL)(),r=(0,s.D)({mutationFn:function(t){return function(t){return S.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([d.a.settings])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function B(){var t=(0,i.a)({queryKey:[d.a.location],queryFn:function(){return function(){return j.apply(this,arguments)}()},onError:function(t){p.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function N(){var t=(0,s.D)({mutationFn:function(t){return function(t){return w.apply(this,arguments)}(t)},onSuccess:function(){(0,l.Cq)("Location added Successfully")},onError:function(t){(0,l.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}function P(){var t=(0,o.NL)(),r=(0,s.D)({mutationFn:function(t){return function(t){return k.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([d.a.location])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function U(){var t=(0,o.NL)(),r=(0,s.D)({mutationFn:function(t){return function(t){return E.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([d.a.location])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}},3233:function(t,r,e){e.d(r,{n:function(){return a}});var n=e(184);function a(t){var r=t.title,e=t.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{style:{textAlign:"left",margin:0,marginBottom:"2rem"},children:r}),(0,n.jsx)(n.Fragment,{children:e})]})}},5317:function(t,r,e){e.d(r,{s:function(){return s}});var n=e(5043),a=e(97),u=e.n(a),i=e(3233),o=e(184);function s(t){var r,e=t.webcamRef,a=t.capture,s=t.cameraActive,c=t.handleCameraClick,l=t.picture,p=t.formData,d=t.first,f=t.data;return s&&(r=(0,o.jsxs)(o.Fragment,{children:[d&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{children:["Hi ",null===f||void 0===f?void 0:f.first_name]}),(0,o.jsx)("p",{children:"Please take a picture to setup your Face Recognition for the first time"})]}),(0,o.jsx)("div",{className:"webcam",children:(0,o.jsx)(u(),{audio:!1,ref:e,screenshotFormat:"image/jpeg"})}),(0,o.jsx)(n.zx,{title:"capture",type:"button",style:{background:"black"},onClick:a})]})),!s&&l&&(r=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"webcam",children:(0,o.jsx)("img",{src:l,alt:p.first_name})}),(0,o.jsx)(n.zx,{style:{background:"black"},title:"retake picture",type:"button",onClick:c})]})),s||l||(r=(0,o.jsx)(n.zx,{style:{background:"#3c7d5c"},title:"take picture",type:"button",onClick:c})),(0,o.jsx)(i.n,{title:"Picture Upload",children:r})}},8397:function(t,r,e){e.d(r,{m:function(){return f},p:function(){return h}});var n=e(4165),a=e(5861),u=e(7689),i=e(2805),o=e(3418),s=e(6403),c=e(749),l=e(6414);function p(){return(p=(0,a.Z)((0,n.Z)().mark((function t(r){var e,a;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,Object.keys(r).forEach((function(t){e.append(t,r[t])})),t.next=4,(0,i.b)({url:"/user",method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}});case 4:return a=t.sent,t.abrupt("return",null===a||void 0===a?void 0:a.data);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function d(){return d=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.allSettled(r.map(function(){var t=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.b)({url:"/user",method:"POST",data:r,headers:{"Content-Type":"multipart/form-data"}});case 3:return e=t.sent,t.next=6,e;case 6:return t.abrupt("return",t.sent);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(r){return t.apply(this,arguments)}}()));case 2:return e=t.sent,t.next=5,e;case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)}))),d.apply(this,arguments)}function f(){(0,u.s0)();var t=(0,o.D)({mutationFn:function(t){return function(t){return p.apply(this,arguments)}(t)},onSuccess:function(){(0,c.Cq)("Registration Successful")},onError:function(t){(0,c.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}function h(){var t=(0,s.NL)(),r=(0,o.D)({mutationFn:function(t){return function(t){return d.apply(this,arguments)}(t)},onSuccess:function(){t.invalidateQueries([l.a.user])}});return{mutate:r.mutate,isError:r.isError,error:r.error,isSuccess:r.isSuccess,reset:r.reset,data:r.data}}},9514:function(t,r,e){e.r(r),e.d(r,{default:function(){return Z}});var n=e(4942),a=e(1413),u=e(9439),i=e(2791),o=e(5043),s=e(3722),c=e(8397),l=e(749),p=e(6800),d=e(8424),f=e(3233),h=e(184);function m(t){var r=t.formData,e=t.handleChange,n=t.validationHandler,a=t.errors,u=(0,d._z)().data;return(0,h.jsxs)(f.n,{title:"Contact Info",children:[(0,h.jsx)(o.II,{name:"first_name",label:"First Name",value:r.first_name,onChange:e,type:"text",validationHandler:n,error:a.first_name,required:!0,size:"large"}),(0,h.jsx)(o.II,{name:"last_name",label:"Last Name",value:r.last_name,onChange:e,type:"text",validationHandler:n,error:a.last_name,required:!0,size:"large"}),(0,h.jsx)(o.II,{name:"email",label:"Email Address",value:r.email,onChange:e,type:"email",validationHandler:n,error:a.email,required:!0,size:"large"}),(0,h.jsx)(o.Ph,{name:"location_id",label:"Location",value:r.location_id,onChange:e,type:"text",validationHandler:n,error:a.location_id,required:!0,data:u,filter:"name",filterValue:"id",size:"large",className:"formInput"})]})}var v=e(5317),y=e(1905),x=e(347),b=e(7689),Z=function(){var t=(0,i.useState)({}),r=(0,u.Z)(t,2),e=r[0],d=r[1],f=(0,i.useState)(null),Z=(0,u.Z)(f,2),g=Z[0],S=Z[1],w=(0,i.useState)({}),j=(0,u.Z)(w,2),k=j[0],E=j[1],C=(0,i.useState)(""),T=(0,u.Z)(C,2),z=T[0],F=T[1],A=(0,i.useState)(!1),K=(0,u.Z)(A,2),q=K[0],D=K[1],H=(0,i.useState)(!1),L=(0,u.Z)(H,2),B=L[0],N=L[1],P=(0,i.useRef)(null),U=(0,c.m)(),_=U.mutate,I=U.isSuccess,Q=U.reset,G=U.data,O=(0,s.B)(),R=(0,b.s0)(),Y=(0,i.useCallback)((function(){var t=P.current.getScreenshot();t?(S(t),d((0,a.Z)((0,a.Z)({},e),{},{file:(0,l.v9)(t,"image")})),D(!1),(0,l.Cq)("Picture captured!")):(0,l.ll)("Please wait for camera to load before clicking on capture!")}),[P,e]),M=(0,p.h)([(0,h.jsx)(m,{formData:e,errors:k,validationHandler:function(t,r){E((0,a.Z)((0,a.Z)({},k),{},(0,n.Z)({},t,r)))},handleChange:function(t,r){d((0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t,r)))}}),(0,h.jsx)(v.s,{webcamRef:P,isLoading:O,capture:Y,cameraActive:q,handleCameraClick:function(t){D(!0)},picture:g,formData:e})]),V=M.steps,W=M.currentStepIndex,X=M.step,J=M.isFirstStep,$=M.isLastStep,tt=M.back,rt=M.next;return I&&(Q(),N(!0),F(null===G||void 0===G?void 0:G.data.qr_code_b64)),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("h1",{children:"Let's get you started!"}),B?(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{children:"This is the QR image generated for you kindly save it"}),(0,h.jsx)(y.Z,{base64String:z}),(0,h.jsxs)("div",{style:{width:"40%",marginLeft:"30%"},children:[" ",(0,h.jsx)("button",{className:"btn btnYellow",onClick:function(){R(x.Ot.HOME)},children:"Go Home"})]})]}):(0,h.jsxs)(o.cw,{onSubmit:function(){if(!$)return rt();e.file?_(e):(0,l.ll)("No picture found.\n\t\t\t\tPlease click on 'Take Picture' to attach your picture to the form")},children:[(0,h.jsxs)("div",{style:{position:"absolute",top:".5rem",right:".5rem"},children:[W+1," / ",V.length]}),X,(0,h.jsxs)("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:".5rem"},children:[(0,h.jsx)(o.zx,{title:$?"Finish":"Next",size:"large",type:"submit",className:O?"btn-disabled":"",loading:1===O,disabled:1===O}),!J&&(0,h.jsx)(o.zx,{title:"back",size:"large",onClick:tt,type:"button",className:O?"btn-disabled":"btnRedTxt"})]})]})]})}},6800:function(t,r,e){e.d(r,{h:function(){return u}});var n=e(9439),a=e(2791);function u(t){var r=(0,a.useState)(0),e=(0,n.Z)(r,2),u=e[0],i=e[1];return{currentStepIndex:u,step:t[u],steps:t,isFirstStep:0===u,isLastStep:u===t.length-1,goTo:function(t){i(t)},next:function(){i((function(r){return r>=t.length-1?r:r+1}))},back:function(){i((function(t){return t<=0?t:t-1}))}}}}}]);
//# sourceMappingURL=514.77fd1018.chunk.js.map