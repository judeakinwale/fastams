"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[514],{3233:function(e,t,r){r.d(t,{n:function(){return a}});var n=r(184);function a(e){var t=e.title,r=e.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{style:{textAlign:"left",margin:0,marginBottom:"2rem"},children:t}),(0,n.jsx)(n.Fragment,{children:r})]})}},5317:function(e,t,r){r.d(t,{s:function(){return c}});var n=r(5043),a=r(97),i=r.n(a),s=r(3233),u=r(184);function c(e){var t,r=e.webcamRef,a=e.capture,c=e.cameraActive,o=e.handleCameraClick,l=e.picture,d=e.formData,f=e.first,m=e.data;return c&&(t=(0,u.jsxs)(u.Fragment,{children:[f&&(0,u.jsxs)("div",{children:[(0,u.jsxs)("h3",{children:["Hi ",null===m||void 0===m?void 0:m.first_name]}),(0,u.jsx)("p",{children:"Please take a picture to setup your Face Recognition for the first time"})]}),(0,u.jsx)("div",{className:"webcam",children:(0,u.jsx)(i(),{audio:!1,ref:r,screenshotFormat:"image/jpeg"})}),(0,u.jsx)(n.zx,{title:"capture",type:"button",style:{background:"black"},onClick:a})]})),!c&&l&&(t=(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"webcam",children:(0,u.jsx)("img",{src:l,alt:d.first_name})}),(0,u.jsx)(n.zx,{style:{background:"black"},title:"retake picture",type:"button",onClick:o})]})),c||l||(t=(0,u.jsx)(n.zx,{style:{background:"#3c7d5c"},title:"take picture",type:"button",onClick:o})),(0,u.jsx)(s.n,{title:"Picture Upload",children:t})}},8397:function(e,t,r){r.d(t,{m:function(){return m},p:function(){return p}});var n=r(4165),a=r(5861),i=r(7689),s=r(2805),u=r(3418),c=r(6403),o=r(749),l=r(6414);function d(){return(d=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,Object.keys(t).forEach((function(e){r.append(e,t[e])})),e.next=4,(0,s.b)({url:"/user",method:"POST",data:r,headers:{"Content-Type":"multipart/form-data"}});case 4:return a=e.sent,e.abrupt("return",null===a||void 0===a?void 0:a.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return f=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.allSettled(t.map(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.b)({url:"/user",method:"POST",data:t,headers:{"Content-Type":"multipart/form-data"}});case 3:return r=e.sent,e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(0),e.abrupt("return",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,e.next=5,r;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function m(){(0,i.s0)();var e=(0,u.D)({mutationFn:function(e){return function(e){return d.apply(this,arguments)}(e)},onSuccess:function(){(0,o.Cq)("Registration Successful")},onError:function(e){(0,o.sD)(e)}});return{mutate:e.mutate,isError:e.isError,error:e.error,isSuccess:e.isSuccess,reset:e.reset,data:e.data}}function p(){var e=(0,c.NL)(),t=(0,u.D)({mutationFn:function(e){return function(e){return f.apply(this,arguments)}(e)},onSuccess:function(){e.invalidateQueries([l.a.user])}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}},9514:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(4942),a=r(1413),i=r(9439),s=r(2791),u=r(5043),c=r(3722),o=r(8397),l=r(749),d=r(6800),f=r(8424),m=r(3233),p=r(184);function h(e){var t=e.formData,r=e.handleChange,n=e.validationHandler,a=e.errors,i=(0,f._z)().data;return(0,p.jsxs)(m.n,{title:"Contact Info",children:[(0,p.jsx)(u.II,{name:"first_name",label:"First Name",value:t.first_name,onChange:r,type:"text",validationHandler:n,error:a.first_name,required:!0,size:"large"}),(0,p.jsx)(u.II,{name:"last_name",label:"Last Name",value:t.last_name,onChange:r,type:"text",validationHandler:n,error:a.last_name,required:!0,size:"large"}),(0,p.jsx)(u.II,{name:"email",label:"Email Address",value:t.email,onChange:r,type:"email",validationHandler:n,error:a.email,required:!0,size:"large"}),(0,p.jsx)(u.Ph,{name:"location_id",label:"Location",value:t.location_id,onChange:r,type:"text",validationHandler:n,error:a.location_id,required:!0,data:i,filter:"name",filterValue:"id",size:"large",className:"formInput"})]})}var x=r(5317),v=r(1905),b=r(347),g=r(7689),j=function(){var e=(0,s.useState)({}),t=(0,i.Z)(e,2),r=t[0],f=t[1],m=(0,s.useState)(null),j=(0,i.Z)(m,2),k=j[0],y=j[1],S=(0,s.useState)({}),Z=(0,i.Z)(S,2),C=Z[0],w=Z[1],F=(0,s.useState)(""),_=(0,i.Z)(F,2),z=_[0],N=_[1],I=(0,s.useState)(!1),P=(0,i.Z)(I,2),D=P[0],H=P[1],T=(0,s.useState)(!1),E=(0,i.Z)(T,2),L=E[0],q=E[1],R=(0,s.useRef)(null),O=(0,o.m)(),A=O.mutate,B=O.isSuccess,Q=O.reset,G=O.data,M=(0,c.B)(),U=(0,g.s0)(),V=(0,s.useCallback)((function(){var e=R.current.getScreenshot();e?(y(e),f((0,a.Z)((0,a.Z)({},r),{},{file:(0,l.v9)(e,"image")})),H(!1),(0,l.Cq)("Picture captured!")):(0,l.ll)("Please wait for camera to load before clicking on capture!")}),[R,r]),Y=(0,d.h)([(0,p.jsx)(h,{formData:r,errors:C,validationHandler:function(e,t){w((0,a.Z)((0,a.Z)({},C),{},(0,n.Z)({},e,t)))},handleChange:function(e,t){f((0,a.Z)((0,a.Z)({},r),{},(0,n.Z)({},e,t)))}}),(0,p.jsx)(x.s,{webcamRef:R,isLoading:M,capture:V,cameraActive:D,handleCameraClick:function(e){H(!0)},picture:k,formData:r})]),J=Y.steps,K=Y.currentStepIndex,W=Y.step,X=Y.isFirstStep,$=Y.isLastStep,ee=Y.back,te=Y.next;return B&&(Q(),q(!0),N(null===G||void 0===G?void 0:G.data.qr_code_b64)),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h1",{children:"Let's get you started!"}),L?(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{children:"This is the QR image generated for you kindly save it"}),(0,p.jsx)(v.Z,{base64String:z}),(0,p.jsxs)("div",{style:{width:"40%",marginLeft:"30%"},children:[" ",(0,p.jsx)("button",{className:"btn btnYellow",onClick:function(){U(b.Ot.HOME)},children:"Go Home"})]})]}):(0,p.jsxs)(u.cw,{onSubmit:function(){if(!$)return te();r.file?A(r):(0,l.ll)("No picture found.\n\t\t\t\tPlease click on 'Take Picture' to attach your picture to the form")},children:[(0,p.jsxs)("div",{style:{position:"absolute",top:".5rem",right:".5rem"},children:[K+1," / ",J.length]}),W,(0,p.jsxs)("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:".5rem"},children:[(0,p.jsx)(u.zx,{title:$?"Finish":"Next",size:"large",type:"submit",className:M?"btn-disabled":"",loading:1===M,disabled:1===M}),!X&&(0,p.jsx)(u.zx,{title:"back",size:"large",onClick:ee,type:"button",className:M?"btn-disabled":"btnRedTxt"})]})]})]})}},6800:function(e,t,r){r.d(t,{h:function(){return i}});var n=r(9439),a=r(2791);function i(e){var t=(0,a.useState)(0),r=(0,n.Z)(t,2),i=r[0],s=r[1];return{currentStepIndex:i,step:e[i],steps:e,isFirstStep:0===i,isLastStep:i===e.length-1,goTo:function(e){s(e)},next:function(){s((function(t){return t>=e.length-1?t:t+1}))},back:function(){s((function(e){return e<=0?e:e-1}))}}}}}]);
//# sourceMappingURL=514.61ce962d.chunk.js.map