{"version":3,"file":"static/js/514.61ce962d.chunk.js","mappings":"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","sources":["modules/Auth/Register/components/FormWrapper.jsx","modules/Auth/Register/components/PictureUpload.jsx","modules/Auth/Register/hooks/index.js","modules/Auth/Register/components/ContactInfo.jsx","modules/Auth/Register/index.js","utils/useMultistepForm.js"],"sourcesContent":["export function FormWrapper({ title, children }) {\n\treturn (\n\t\t<>\n\t\t\t<h2\n\t\t\t\tstyle={{ textAlign: \"left\", margin: 0, marginBottom: \"2rem\" }}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</h2>\n\t\t\t<>{children}</>\n\t\t</>\n\t);\n}\n","import { Button } from \"mtforms\";\nimport Webcam from \"react-webcam\";\n\nimport { FormWrapper } from \"./FormWrapper\";\nimport \"./picture-upload.css\";\n\nexport function PictureUpload({\n  webcamRef,\n  capture,\n  cameraActive,\n  handleCameraClick,\n  picture,\n  formData,\n  first,\n  data,\n}) {\n  let output;\n\n  if (cameraActive) {\n    output = (\n      <>\n        {first && (\n          <div>\n            <h3>Hi {data?.first_name}</h3>\n            <p>\n              Please take a picture to setup your Face Recognition for the first\n              time\n            </p>\n          </div>\n        )}\n        <div className=\"webcam\">\n          <Webcam audio={false} ref={webcamRef} screenshotFormat=\"image/jpeg\" />\n        </div>\n        <Button\n          title=\"capture\"\n          type=\"button\"\n          style={{ background: \"black\" }}\n          onClick={capture}\n        />\n      </>\n    );\n  }\n  if (!cameraActive && picture) {\n    output = (\n      <>\n        <div className=\"webcam\">\n          <img src={picture} alt={formData.first_name} />\n        </div>\n        <Button\n          style={{ background: \"black\" }}\n          title=\"retake picture\"\n          type=\"button\"\n          onClick={handleCameraClick}\n        />\n      </>\n    );\n  }\n  if (!cameraActive && !picture) {\n    output = (\n      <Button\n        style={{ background: \"#3c7d5c\" }}\n        title=\"take picture\"\n        type=\"button\"\n        onClick={handleCameraClick}\n      />\n    );\n  }\n\n  return <FormWrapper title=\"Picture Upload\">{output}</FormWrapper>;\n}\n","import { useNavigate } from \"react-router-dom\";\nimport { axiosInstance } from \"../../../../axios-Instance\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { errorAlert, successAlert } from \"../../../../utils\";\nimport { queryKeys } from \"../../../../react-query/constants\";\n\nasync function userRegister(formData) {\n  // Convert JSON data to FormData\n  const newFormData = new FormData();\n  // formData[\"file\"] = formData?.image // the backend needs \"file\", the formdata has \"image\"\n  Object.keys(formData).forEach((key) => {\n    newFormData.append(key, formData[key]);\n  });\n  const data = await axiosInstance({\n    url: \"/user\",\n    method: \"POST\",\n    data: newFormData,\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n\n  return data?.data;\n}\n\nasync function BulkUpload(excelData) {\n  const result = await Promise.allSettled(\n    excelData.map(async (formData) => {\n      try {\n        const response = await axiosInstance({\n          url: `/user`,\n          method: \"POST\",\n          data: formData,\n          headers: {\n            \"Content-Type\": \"multipart/form-data\",\n          },\n        });\n        return await response;\n      } catch (err) {\n        return err;\n      }\n    })\n  );\n\n  return await result;\n}\n\nexport function useRegister() {\n  const navigate = useNavigate();\n  const { mutate, isError, error, isSuccess, reset, data } = useMutation({\n    mutationFn: (formData) => userRegister(formData),\n    onSuccess: () => {\n      successAlert(\"Registration Successful\");\n      // setTimeout(() => {\n      // \tnavigate(PublicPaths.HOME);\n      // }, 3000);\n    },\n    onError: (error) => {\n      errorAlert(error);\n    },\n  });\n  return { mutate, isError, error, isSuccess, reset, data };\n}\n\nexport function useBulkRegister() {\n  const queryClient = useQueryClient();\n  const { mutate, isError, error, isSuccess, reset, data } = useMutation({\n    mutationFn: (formData) => BulkUpload(formData),\n    onSuccess: () => {\n      queryClient.invalidateQueries([queryKeys.user]);\n    },\n  });\n  return { mutate, isError, error, isSuccess, reset, data };\n}\n","import { Input, Select } from \"mtforms\";\nimport { useGetLocation } from \"../../../Admin/hooks\";\n\nimport { FormWrapper } from \"./FormWrapper\";\n\nexport function ContactInfo({\n\tformData,\n\thandleChange,\n\tvalidationHandler,\n\terrors,\n}) {\n\tconst { data } = useGetLocation();\n\treturn (\n\t\t<FormWrapper title=\"Contact Info\">\n\t\t\t<Input\n\t\t\t\tname=\"first_name\"\n\t\t\t\tlabel=\"First Name\"\n\t\t\t\tvalue={formData[\"first_name\"]}\n\t\t\t\tonChange={handleChange}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalidationHandler={validationHandler}\n\t\t\t\terror={errors.first_name}\n\t\t\t\trequired={true}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tname=\"last_name\"\n\t\t\t\tlabel=\"Last Name\"\n\t\t\t\tvalue={formData[\"last_name\"]}\n\t\t\t\tonChange={handleChange}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalidationHandler={validationHandler}\n\t\t\t\terror={errors.last_name}\n\t\t\t\trequired={true}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t\t<Input\n\t\t\t\tname=\"email\"\n\t\t\t\tlabel=\"Email Address\"\n\t\t\t\tvalue={formData[\"email\"]}\n\t\t\t\tonChange={handleChange}\n\t\t\t\ttype=\"email\"\n\t\t\t\tvalidationHandler={validationHandler}\n\t\t\t\terror={errors.email}\n\t\t\t\trequired={true}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tname=\"location_id\"\n\t\t\t\tlabel=\"Location\"\n\t\t\t\tvalue={formData[\"location_id\"]}\n\t\t\t\tonChange={handleChange}\n\t\t\t\ttype=\"text\"\n\t\t\t\tvalidationHandler={validationHandler}\n\t\t\t\terror={errors.location_id}\n\t\t\t\trequired={true}\n\t\t\t\tdata={data}\n\t\t\t\tfilter={\"name\"}\n\t\t\t\tfilterValue={\"id\"}\n\t\t\t\tsize=\"large\"\n\t\t\t\tclassName=\"formInput\"\n\t\t\t/>\n\t\t</FormWrapper>\n\t);\n}\n","import React, { useCallback, useRef, useState } from \"react\";\nimport { Button, FormGroup } from \"mtforms\";\nimport { useIsMutating } from \"@tanstack/react-query\";\nimport { useRegister } from \"./hooks\";\nimport { dataURLtoFile, infoAlert, successAlert } from \"../../../utils\";\nimport { useMultistepForm } from \"../../../utils/useMultistepForm\";\nimport { ContactInfo } from \"./components/ContactInfo\";\nimport { PictureUpload } from \"./components/PictureUpload\";\nimport Base64Image from \"../../../components/base64Image\";\nimport { PublicPaths } from \"../../../routes/path\";\nimport { useNavigate } from \"react-router-dom\";\n\nconst Register = () => {\n\tconst [formData, setFormData] = useState({});\n\tconst [picture, setPicture] = useState(null);\n\tconst [errors, setErrors] = useState({});\n\tconst [imageUrl, setImageUrl] = useState(\"\");\n\tconst [cameraActive, setCameraActive] = useState(false);\n\tconst [regSuccess, setRegSuccess] = useState(false);\n\tconst webcamRef = useRef(null);\n\tconst { mutate, isSuccess, reset, data } = useRegister();\n\tconst isLoading = useIsMutating();\n\tconst navigate = useNavigate();\n\n\t// STUB: capture image & deactivate camera\n\tconst capture = useCallback(() => {\n\t\tconst imageSrc = webcamRef.current.getScreenshot();\n\t\tif (imageSrc) {\n\t\t\tsetPicture(imageSrc);\n\t\t\tsetFormData({\n\t\t\t\t...formData,\n\t\t\t\tfile: dataURLtoFile(imageSrc, \"image\"),\n\t\t\t});\n\t\t\tsetCameraActive(false);\n\t\t\tsuccessAlert(`Picture captured!`);\n\t\t} else {\n\t\t\tinfoAlert(\n\t\t\t\t`Please wait for camera to load before clicking on capture!`\n\t\t\t);\n\t\t}\n\t}, [webcamRef, formData]);\n\n\t// STUB: turn on camera\n\tconst handleCameraClick = (e) => {\n\t\tsetCameraActive(true);\n\t};\n\n\tconst handleChange = (name, value) => {\n\t\tsetFormData({ ...formData, [name]: value });\n\t};\n\n\tconst validationHandler = (name, error) => {\n\t\tsetErrors({ ...errors, [name]: error });\n\t};\n\n\t// STUB: multistep form hook\n\tconst {\n\t\tsteps,\n\t\tcurrentStepIndex,\n\t\tstep,\n\t\tisFirstStep,\n\t\tisLastStep,\n\t\tback,\n\t\tnext,\n\t} = useMultistepForm([\n\t\t<ContactInfo\n\t\t\tformData={formData}\n\t\t\terrors={errors}\n\t\t\tvalidationHandler={validationHandler}\n\t\t\thandleChange={handleChange}\n\t\t/>,\n\t\t<PictureUpload\n\t\t\twebcamRef={webcamRef}\n\t\t\tisLoading={isLoading}\n\t\t\tcapture={capture}\n\t\t\tcameraActive={cameraActive}\n\t\t\thandleCameraClick={handleCameraClick}\n\t\t\tpicture={picture}\n\t\t\tformData={formData}\n\t\t/>,\n\t]);\n\n\tconst submitHandler = () => {\n\t\tif (!isLastStep) return next();\n\t\tif (!formData.file) {\n\t\t\tinfoAlert(\n\t\t\t\t`No picture found.\n\t\t\t\tPlease click on 'Take Picture' to attach your picture to the form`\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tmutate(formData);\n\t};\n\n\tconst homeHandler = () => {\n\t\tnavigate(PublicPaths.HOME);\n\t};\n\n\tif (isSuccess) {\n\t\treset();\n\t\tsetRegSuccess(true);\n\t\tsetImageUrl(data?.data.qr_code_b64);\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<h1>Let's get you started!</h1>\n\t\t\t{regSuccess ? (\n\t\t\t\t<div>\n\t\t\t\t\t<h2>\n\t\t\t\t\t\tThis is the QR image generated for you kindly save it\n\t\t\t\t\t</h2>\n\t\t\t\t\t<Base64Image base64String={imageUrl} />\n\t\t\t\t\t<div style={{ width: \"40%\", marginLeft: \"30%\" }}>\n\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t<button className=\"btn btnYellow\" onClick={homeHandler}>\n\t\t\t\t\t\t\tGo Home\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<FormGroup onSubmit={submitHandler}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\t\t\ttop: \".5rem\",\n\t\t\t\t\t\t\tright: \".5rem\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{currentStepIndex + 1} / {steps.length}\n\t\t\t\t\t</div>\n\t\t\t\t\t{step}\n\t\t\t\t\t<div\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginTop: \"1rem\",\n\t\t\t\t\t\t\tdisplay: \"flex\",\n\t\t\t\t\t\t\tflexDirection: \"column\",\n\t\t\t\t\t\t\tgap: \".5rem\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttitle={isLastStep ? \"Finish\" : \"Next\"}\n\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName={isLoading ? \"btn-disabled\" : \"\"}\n\t\t\t\t\t\t\tloading={isLoading === 1}\n\t\t\t\t\t\t\tdisabled={isLoading === 1}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t{!isFirstStep && (\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\ttitle=\"back\"\n\t\t\t\t\t\t\t\tsize=\"large\"\n\t\t\t\t\t\t\t\tonClick={back}\n\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\tclassName={\n\t\t\t\t\t\t\t\t\tisLoading ? \"btn-disabled\" : \"btnRedTxt\"\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</FormGroup>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Register;\n","// NOTE: create hook to manage multistep form\n\nimport { useState } from \"react\";\n\nexport function useMultistepForm(steps) {\n\tconst [currentStepIndex, setCurrentStepIndex] = useState(0);\n\n\t// STUB: go to next form page\n\tfunction next() {\n\t\tsetCurrentStepIndex((i) => {\n\t\t\tif (i >= steps.length - 1) return i;\n\t\t\treturn i + 1;\n\t\t});\n\t}\n\n\t// STUB: go to previous form page\n\tfunction back() {\n\t\tsetCurrentStepIndex((i) => {\n\t\t\tif (i <= 0) return i;\n\t\t\treturn i - 1;\n\t\t});\n\t}\n\n\t// STUB: go to specific form page\n\tfunction goTo(index) {\n\t\tsetCurrentStepIndex(index);\n\t}\n\n\treturn {\n\t\tcurrentStepIndex,\n\t\tstep: steps[currentStepIndex],\n\t\tsteps,\n\t\tisFirstStep: currentStepIndex === 0,\n\t\tisLastStep: currentStepIndex === steps.length - 1,\n\t\tgoTo,\n\t\tnext,\n\t\tback,\n\t};\n}\n"],"names":["FormWrapper","_ref","title","children","_jsxs","_Fragment","_jsx","style","textAlign","margin","marginBottom","PictureUpload","output","webcamRef","capture","cameraActive","handleCameraClick","picture","formData","first","data","first_name","className","Webcam","audio","ref","screenshotFormat","Button","type","background","onClick","src","alt","_userRegister","_asyncToGenerator","_regeneratorRuntime","mark","_callee","newFormData","wrap","_context","prev","next","FormData","Object","keys","forEach","key","append","axiosInstance","url","method","headers","sent","abrupt","stop","apply","arguments","_BulkUpload","_callee3","excelData","result","_context3","Promise","allSettled","map","_callee2","response","_context2","t0","_x3","useRegister","useNavigate","_useMutation","useMutation","mutationFn","_x","userRegister","onSuccess","successAlert","onError","error","errorAlert","mutate","isError","isSuccess","reset","useBulkRegister","queryClient","useQueryClient","_useMutation2","_x2","BulkUpload","invalidateQueries","queryKeys","ContactInfo","handleChange","validationHandler","errors","useGetLocation","Input","name","label","value","onChange","required","size","last_name","email","Select","location_id","filter","filterValue","_useState","useState","_useState2","_slicedToArray","setFormData","_useState3","_useState4","setPicture","_useState5","_useState6","setErrors","_useState7","_useState8","imageUrl","setImageUrl","_useState9","_useState10","setCameraActive","_useState11","_useState12","regSuccess","setRegSuccess","useRef","_useRegister","isLoading","useIsMutating","navigate","useCallback","imageSrc","current","getScreenshot","_objectSpread","file","dataURLtoFile","infoAlert","_useMultistepForm","useMultistepForm","_defineProperty","e","steps","currentStepIndex","step","isFirstStep","isLastStep","back","qr_code_b64","Base64Image","base64String","width","marginLeft","PublicPaths","FormGroup","onSubmit","position","top","right","length","marginTop","display","flexDirection","gap","loading","disabled","setCurrentStepIndex","goTo","index","i"],"sourceRoot":""}