"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[645],{2209:function(e,n,a){a.d(n,{Z:function(){return s}});var t=a(2791),i=a(184),s=function(e){var n=e.isVisible,a=void 0!==n&&n,s=e.title,l=e.content,r=e.footer,o=e.onClose,c=e.size,u=void 0===c?"md":c,d=function(e){if("Escape"===e.key)o()};return(0,t.useEffect)((function(){return document.addEventListener("keydown",d),function(){return document.removeEventListener("keydown",d)}})),a?(0,i.jsxs)("div",{className:"modal",onClick:o,children:[(0,i.jsx)("div",{className:"closeCon ".concat(u),children:(0,i.jsx)("span",{className:"modal-close",onClick:o,children:"\xd7"})}),(0,i.jsxs)("div",{className:"modal-dialog ".concat(u),onClick:function(e){return e.stopPropagation()},children:[(0,i.jsx)("div",{className:"modal-header",children:(0,i.jsx)("h3",{className:"modal-title",children:s})}),(0,i.jsx)("div",{className:"modal-body",children:(0,i.jsx)("div",{className:"modal-content",children:l})}),r&&(0,i.jsx)("div",{className:"modal-footer",children:r})]})]}):null}},4605:function(e,n,a){a.d(n,{z:function(){return t}});var t=[{title:"First Name",field:"first_name"},{title:"Last Name",field:"last_name"},{title:"Email",field:"email"}]},6041:function(e,n,a){a.r(n),a.d(n,{default:function(){return g}});var t=a(4942),i=a(1413),s=a(9439),l=a(2791),r=(a(2350),a(5088),a(5043)),o=a(4605),c=a(8424),u=a(2209),d=a(3722),m=a(5985),f=a(749),v=a(2062),x=a.n(v),b=a(347),h=a(7689),_=a(6075),N=a(184),g=function(){var e=(0,c.w4)().data,n=(0,l.useState)(!0),a=(0,s.Z)(n,2),v=a[0],g=a[1],j=(0,l.useState)(!1),p=(0,s.Z)(j,2),y=p[0],C=p[1],I=(0,l.useState)({}),k=(0,s.Z)(I,2),z=k[0],A=k[1],Z=(0,l.useState)(!1),S=(0,s.Z)(Z,2),H=S[0],w=S[1],E=(0,l.useState)({}),L=(0,s.Z)(E,2),P=L[0],q=L[1],D=(0,c.WY)(),F=D.mutate,O=D.isSuccess,V=D.reset,M=(0,h.s0)(),U=(0,c._z)().data,T=null===e||void 0===e?void 0:e.filter((function(e){return!0===e.is_admin})),B=(0,d.B)(),K=function(e,n){A((0,i.Z)((0,i.Z)({},z),{},(0,t.Z)({},e,n)))},R=function(e,n){q((0,i.Z)((0,i.Z)({},P),{},(0,t.Z)({},e,n)))},Y=(0,c.F_)(),G=Y.mutate,W=Y.isError,$=Y.isSuccess,J=Y.reset,Q=Y.error;W&&(J(),(0,f.sD)(Q)),$&&(J(),m.Am.success("User Deleted Successfully",f.HK));var X=(0,c.Io)(),ee=X.mutate,ne=X.isError,ae=X.isSuccess,te=X.reset,ie=X.error,se=(0,c.Io)(),le=se.mutate,re=se.isError,oe=se.isSuccess,ce=se.reset,ue=se.error;ne&&(te(),(0,f.sD)(ie)),ae&&(te(),m.Am.success("Successful",f.HK)),re&&(ce(),(0,f.sD)(ue)),oe&&(ce(),m.Am.success("user updated successfully",f.HK),A({}),w(!1));O&&(A({}),C(!1),V(),m.Am.success("Admin added Successfully",f.HK));var de=function(){le(z)};return(0,N.jsx)(_.Z,{name:"User",title:"Users",children:(0,N.jsxs)("div",{className:"report_container",children:[(0,N.jsxs)("div",{className:"button_container",children:[(0,N.jsx)("button",{className:v?"btn btnPurple":"btn",onClick:function(){g(!v)},children:"All Staffs"}),(0,N.jsx)("button",{button:!0,className:v?"btn":"btn btnPurple",onClick:function(){g(!v)},children:"Admins"}),v?null:(0,N.jsx)("button",{button:!0,className:"btn btnGreenPry",onClick:function(){C(!0)},children:"Add Admin"})]}),(0,N.jsx)("div",{className:"table_container",children:v?(0,N.jsx)(r.iA,{columns:o.z,data:e,actions:function(e){return[{name:"Attendance History",onClick:function(e){M("".concat(b.oj.ADMIN_USER_HISTORY,"/").concat(e.id))}},{name:"Edit User",onClick:function(e){A(e),w(!0)}},{name:"Delete User",onClick:function(e){x()({title:"Are you sure?",text:"Once deleted, you will not be able to recover this",icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){n&&G(e.id)}))}},{name:"Add as Admin",onClick:function(e){x()({title:"Are you sure?",text:"This user will have admin privilegde",icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){if(n){var a=(0,i.Z)((0,i.Z)({},z),{},{id:e.id,is_admin:!0});ee(a)}}))}}]},selectID:"id"}):(0,N.jsx)(r.iA,{columns:o.z,data:T,actions:function(e){return[{name:"Remove as Admin",onClick:function(e){x()({title:"Are you sure?",text:"This user will no longer have admin privilegde",icon:"warning",buttons:!0,dangerMode:!0}).then((function(n){if(n){var a=(0,i.Z)((0,i.Z)({},z),{},{id:e.id,is_admin:!1});ee(a)}}))}}]},selectID:"id"})}),(0,N.jsx)(u.Z,{isVisible:y,title:"",size:"md",content:(0,N.jsx)("div",{className:"modal_form_container",children:(0,N.jsxs)(r.cw,{onSubmit:function(){F(z)},validation:z,errors:P,setErrors:q,className:"Form",children:[(0,N.jsx)(r.II,{name:"first_name",label:"First Name",value:z.first_name,onChange:K,type:"text",validationHandler:R,error:P.first_name,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.II,{name:"last_name",label:"Last Name",value:z.last_name,onChange:K,type:"text",validationHandler:R,error:P.last_name,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.II,{name:"email",label:"Email",value:z.email,onChange:K,type:"text",validationHandler:R,error:P.email,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.Ph,{name:"location_id",label:"Location",value:z.location_id,onChange:K,type:"text",validationHandler:R,error:P.location_id,required:!0,data:U,filter:"name",filterValue:"id",size:"large",className:"formInput"}),(0,N.jsx)(r.Ph,{name:"is_on_leave",label:"Is on Leave",value:z.is_on_leave,onChange:K,type:"checkbox",validationHandler:R,error:P.is_on_leave,data:[{name:"True",value:!0},{name:"False",value:!1}],filter:"name",filterValue:"value",size:"large",className:"formInput"}),(0,N.jsx)(r.zx,{size:"large",type:"submit",title:B?"loading..":"Add",disabled:!!B,className:"formButton btnPurple"})]})}),onClose:function(){return C(!1)},footer:""}),(0,N.jsx)(u.Z,{isVisible:H,title:"",size:"md",content:(0,N.jsx)("div",{className:"modal_form_container",children:(0,N.jsxs)(r.cw,{onSubmit:de,validation:z,errors:P,setErrors:q,className:"Form",children:[(0,N.jsx)(r.II,{name:"first_name",label:"First Name",value:z.first_name,onChange:K,type:"text",validationHandler:R,error:P.first_name,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.II,{name:"last_name",label:"Last Name",value:z.last_name,onChange:K,type:"text",validationHandler:R,error:P.last_name,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.II,{name:"email",label:"Email",value:z.email,onChange:K,type:"text",validationHandler:R,error:P.email,required:!0,readOnly:!0,size:"large",className:"formInput"}),(0,N.jsx)(r.Ph,{name:"location_id",label:"Location",value:z.location_id,onChange:K,type:"text",validationHandler:R,error:P.location_id,required:!0,data:U,filter:"name",filterValue:"id",size:"large",className:"formInput"}),(0,N.jsx)(r.Ph,{name:"is_on_leave",label:"Is on Leave",value:z.is_on_leave,onChange:K,type:"checkbox",validationHandler:R,error:P.is_on_leave,data:[{name:"True",value:!0},{name:"False",value:!1}],filter:"name",filterValue:"value",size:"large",className:"formInput"}),(0,N.jsx)(r.zx,{size:"large",onClick:de,type:"button",title:B?"loading..":"Save",disabled:!!B,className:"formButton"})]})}),onClose:function(){w(!1),A({})},footer:""})]})})}},2350:function(){},5088:function(){},3722:function(e,n,a){a.d(n,{B:function(){return c}});var t=a(9439),i=a(2791),s=a(7413),l=a(3734),r=a(9538),o=a(6403);function c(e,n,a){var c=(0,l.cb)(e,n,a),u=(0,t.Z)(c,2),d=u[0],m=u[1],f=void 0===m?{}:m,v=(0,o.NL)({context:f.context}),x=v.getMutationCache();return(0,s.$)(i.useCallback((function(e){return x.subscribe(r.V.batchCalls(e))}),[x]),(function(){return v.isMutating(d)}),(function(){return v.isMutating(d)}))}}}]);
//# sourceMappingURL=645.1721a290.chunk.js.map