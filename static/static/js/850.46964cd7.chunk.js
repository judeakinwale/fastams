"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[850],{6751:function(t,n,e){e.d(n,{b:function(){return r}});var o={baseURL:"https://impactlife.azurewebsites.net/api/v1"},r=e(1243).Z.create(o)},4928:function(t,n,e){e.d(n,{K:function(){return v},X:function(){return y}});var o=e(4165),r=e(5861),s=e(6751),a=e(6403),i=e(3418),c=e(2917),u=e(8096),l=e(749),d=e(5985),f=e(6414);function h(){return(h=(0,r.Z)((0,o.Z)().mark((function t(n){var e;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.b)({url:"/attendance/sign-in-qr?content=".concat(n.qrCode,"&long=").concat(n.long,"&lat=").concat(n.lat),method:"POST",headers:{"Content-Type":"multipart/form-data"}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=(0,r.Z)((0,o.Z)().mark((function t(){var n;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.b)({url:"/Attendance/UserAttendStatus",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,u.KU)())}});case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){var t=(0,a.NL)(),n=(0,i.D)({mutationFn:function(t){return function(t){return h.apply(this,arguments)}(t)},onSuccess:function(){d.Am.success("Clock in successfull",l.HK),t.invalidateQueries([f.a.clockIn])},onError:function(t){(0,l.sD)(t,l.HK)}});return{mutate:n.mutate,isError:n.isError,error:n.error,isSuccess:n.isSuccess,reset:n.reset}}function y(){var t=(0,c.a)({queryKey:[f.a.clockIn],queryFn:function(){return function(){return p.apply(this,arguments)}()},onError:function(t){d.Am.error(t,l.HK)}}),n=t.data;return void 0===n?[]:n}},7850:function(t,n,e){e.r(n);var o=e(1413),r=e(9439),s=e(3722),a=e(2791),i=e(7063),c=e(7689),u=e(1087),l=e(347),d=e(4928),f=e(2267),h=e(3348),p=e(575),v=e(184);n.default=function(){var t=(0,a.useState)({}),n=(0,r.Z)(t,2),e=n[0],y=n[1],Z=(0,a.useState)({}),m=(0,r.Z)(Z,2),_=m[0],g=m[1],C=(0,a.useState)(null),j=(0,r.Z)(C,2),x=j[0],b=j[1],w=(0,a.useState)(!1),S=(0,r.Z)(w,2),k=S[0],E=S[1],q=(0,d.K)(),K=q.mutate,A=q.reset,N=q.isSuccess,T=q.isError,B=(0,s.B)(),H=(0,c.s0)();return N&&(A(),H(l.oj.HOME)),T&&H(l.oj.HOME),(0,a.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){y((0,o.Z)((0,o.Z)({},e),{},{long:t.coords.longitude.toString(),lat:t.coords.latitude.toString()}))}),(function(){g((0,o.Z)((0,o.Z)({},_),{},{location:"Unable to retrieve your location"}))})):g((0,o.Z)((0,o.Z)({},_),{},{location:"Geolocation is not supported by your browser"}))}),[_,e]),e.lat&&e.long?(0,v.jsxs)("div",{className:f.Z.container,children:[(0,v.jsx)("div",{className:f.Z.logoContainer,children:(0,v.jsx)(u.rU,{to:l.oj.HOME,children:(0,v.jsx)("img",{src:h,alt:"logo"})})}),(0,v.jsxs)("div",{className:f.Z.qrCode,children:[x?null:(0,v.jsx)(i.T,{onResult:function(t,n){if(t){console.log(t,"result"),b(null===t||void 0===t?void 0:t.text);var r=(0,o.Z)((0,o.Z)({},e),{},{qrCode:null===t||void 0===t?void 0:t.text});K(r)}n&&(console.info(n),g((0,o.Z)((0,o.Z)({},_),{},{QrReader:n})))},constraints:{facingMode:k?"user":"environment"},style:{height:"100px",width:"30%"}}),(0,v.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,v.jsxs)("button",{className:f.Z.btnContainer,onClick:function(){E(!k),b(null),g({})},children:["Switch Camera (",k?"Back":"Front",")"]})})]}),x&&(0,v.jsx)("div",{className:f.Z.result,children:(0,v.jsxs)("h4",{children:["Scanned code :",(0,v.jsxs)("span",{style:{color:"black"},children:[" ",x]})]})}),Boolean(B)&&(0,v.jsx)(p.aN,{})]}):(0,v.jsx)("h1",{children:"Please turn on your location"})}},2267:function(t,n){n.Z={container:"styles_container__B+Po3",qrCode:"styles_qrCode__l9wVC",btnContainer:"styles_btnContainer__WZKTJ",result:"styles_result__uA2DE",logoContainer:"styles_logoContainer__UxVta",imgContainer:"styles_imgContainer__jjjBQ",home:"styles_home__3lA8v",logo:"styles_logo__LLS9j",yellow:"styles_yellow__aWFoT"}}}]);
//# sourceMappingURL=850.46964cd7.chunk.js.map