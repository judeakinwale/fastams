{"version":3,"file":"static/js/731.f7042e58.chunk.js","mappings":"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","sources":["modules/Auth/AdminLogin/Login/index.jsx","modules/Auth/Login/hooks/index.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useIsMutating } from \"@tanstack/react-query\";\nimport { Button, FormGroup, Input, PasswordInput } from \"mtforms\";\nimport { PublicPaths } from \"../../../../routes/path\";\nimport { useLogin } from \"../../Login/hooks\";\n\nconst Index = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const isLoading = useIsMutating();\n\n  const { mutate } = useLogin();\n\n  const handleChange = (name, value) => {\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const validationHandler = (name, error) => {\n    setErrors({ ...errors, [name]: error });\n  };\n\n  const submitHandler = () => {\n    console.log(formData, \"i\");\n    mutate(formData);\n  };\n\n  return (\n    <>\n      <h1>Admin Login</h1>\n      <FormGroup onSubmit={submitHandler}>\n        <Input\n          name=\"email\"\n          label=\"Email Address\"\n          value={formData[\"email\"]}\n          onChange={handleChange}\n          type=\"email\"\n          validationHandler={validationHandler}\n          error={errors.email}\n          required={true}\n          size=\"large\"\n        />\n        <PasswordInput\n          name=\"password\"\n          label=\"Password\"\n          value={formData[\"password\"]}\n          onChange={handleChange}\n          validationHandler={validationHandler}\n          error={errors.password}\n          required={true}\n          size=\"large\"\n        />\n\n        <Button\n          title=\"login\"\n          size=\"large\"\n          className={isLoading ? \"btn-disabled\" : \"\"}\n          style={{ marginTop: \"1rem\" }}\n          loading={isLoading === 1}\n          disabled={isLoading === 1}\n        />\n      </FormGroup>\n\n      <div className=\"link-wrapper\">\n        <span>Forgot your password? </span>\n        <Link to={PublicPaths.FORGOT_PASSWORD}>Reset it here</Link>\n      </div>\n    </>\n  );\n};\n\nexport default Index;\n","import { axiosInstance } from \"../../../../axios-Instance\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../../../context\";\nimport { getLoginToken, setLoginToken } from \"../../../../storage\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { errorAlert, successAlert, toastOptions } from \"../../../../utils\";\nimport { queryKeys } from \"../../../../react-query/constants\";\nimport { toast } from \"react-toastify\";\n\nasync function userLogin(formData) {\n  console.log(formData, \"hook\");\n  const data = await axiosInstance({\n    url: \"/auth\",\n    method: \"POST\",\n    data: formData,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  return data?.data;\n}\n\nasync function getMe() {\n  const data = await axiosInstance({\n    url: \"/auth/me\",\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${getLoginToken()}`,\n    },\n  });\n\n  return data?.data;\n}\n\nexport function useLogin() {\n  const authCtx = useContext(AuthContext);\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userLogin(formData),\n    onSuccess: (data) => {\n      successAlert(\"Login Successful\");\n      setLoginToken(data?.token);\n      authCtx.authenticate(data?.token);\n    },\n    onError: (error) => {\n      errorAlert(error);\n    },\n  });\n  return { mutate, isError, error, isSuccess, reset };\n}\n\nexport function useGetMe() {\n  const fallback = [];\n  const { data = fallback } = useQuery({\n    queryKey: [queryKeys.me],\n    queryFn: () => getMe(),\n    onError: (error) => {\n      toast.error(error, toastOptions);\n    },\n  });\n  return data;\n}\n"],"names":["_useState","useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","errors","setErrors","isLoading","useIsMutating","mutate","useLogin","handleChange","name","value","_objectSpread","_defineProperty","validationHandler","error","_jsxs","_Fragment","children","_jsx","FormGroup","onSubmit","console","log","Input","label","onChange","type","email","required","size","PasswordInput","password","Button","title","className","style","marginTop","loading","disabled","Link","to","PublicPaths","_userLogin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","axiosInstance","url","method","headers","sent","abrupt","stop","apply","arguments","_getMe","_callee2","_context2","Authorization","concat","getLoginToken","authCtx","useContext","AuthContext","_useMutation","useMutation","mutationFn","_x","userLogin","onSuccess","successAlert","setLoginToken","token","authenticate","onError","errorAlert","isError","isSuccess","reset","useGetMe","_useQuery","useQuery","queryKey","queryKeys","queryFn","getMe","toast","toastOptions","_useQuery$data"],"sourceRoot":""}