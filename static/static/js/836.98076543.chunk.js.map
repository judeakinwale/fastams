{"version":3,"file":"static/js/836.98076543.chunk.js","mappings":"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","sources":["axios-Instance/index.js","axios-Instance/constants.js","modules/QRCode/Clockout/hooks/index.js","modules/QRCode/Clockout/index.js","webpack://amsweb/./src/modules/QRCode/Clockin/styles.module.css?9b4e"],"sourcesContent":["import axios from \"axios\";\nimport { baseURL } from \"./constants\";\n\nconst config = { baseURL: baseURL };\nexport const axiosInstance = axios.create(config);\n","// export const baseURL = \"https://pyams.azurewebsites.net/api/v1\";\nexport const baseURL = \"https://impactlife.azurewebsites.net/api/v1\";\n// export const baseURL = \"https://qrcodeattendance.azurewebsites.net/api\";\n","import { axiosInstance } from \"../../../../axios-Instance\";\nimport { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { errorAlert, toastOptions } from \"../../../../utils\";\nimport { toast } from \"react-toastify\";\nimport { queryKeys } from \"../../../../react-query/constants\";\n\nasync function userClockout(formData) {\n  const data = await axiosInstance({\n    url: `/attendance/sign-out-qr?content=${formData.qrCode}&long=${formData.long}&lat=${formData.lat}`,\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n\n  return data?.data;\n}\n\nexport function useClockout() {\n  const queryClient = useQueryClient();\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userClockout(formData),\n    onSuccess: (data) => {\n      toast.success(\"Clock Out successfull\", toastOptions);\n      queryClient.invalidateQueries([queryKeys.clockIn]);\n    },\n    onError: (error) => {\n        errorAlert(error, toastOptions);\n    },\n  });\n  return { mutate, isError, error, isSuccess, reset };\n}\n","import { useIsMutating } from \"@tanstack/react-query\";\nimport React, { useEffect, useState } from \"react\";\nimport { QrReader } from \"react-qr-reader\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { PrivatePaths } from \"../../../routes/path\";\n\nimport lban from \"../../../assets/logo.jpeg\";\nimport styles from \"../Clockin/styles.module.css\";\nimport { useClockout } from \"./hooks\";\nimport { Loader } from \"../../../components\";\n\nconst ClockOut = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [data, setData] = useState(null);\n  const [useFrontCamera, setUseFrontCamera] = useState(false);\n  const { mutate, reset, isSuccess, isError } = useClockout();\n\n  const isLoading = useIsMutating();\n  const navigate = useNavigate();\n\n  const handleCameraSwitch = () => {\n    setUseFrontCamera(!useFrontCamera);\n    setData(null);\n\n    setErrors({});\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const qrData = { ...formData, qrCode: data };\n    mutate(qrData);\n    console.log(qrData);\n  };\n\n  if (isSuccess) {\n    reset();\n    navigate(PrivatePaths.HOME);\n  }\n\n  if (isError) {\n    navigate(PrivatePaths.HOME);\n  }\n\n  useEffect(() => {\n    const getLocation = () => {\n      if (!navigator.geolocation) {\n        setErrors({\n          ...errors,\n          location: \"Geolocation is not supported by your browser\",\n        });\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setFormData({\n              ...formData,\n              long: position.coords.longitude.toString(),\n              lat: position.coords.latitude.toString(),\n            });\n          },\n          () => {\n            setErrors({\n              ...errors,\n              location: \"Unable to retrieve your location\",\n            });\n          }\n        );\n      }\n    };\n    getLocation();\n  }, []);\n\n  if (!formData[\"lat\"] || !formData[\"long\"]) {\n    return <h1>Please turn on your location</h1>;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.logoContainer}>\n        <Link to={PrivatePaths.HOME}>\n          <img src={lban} alt=\"logo\" />\n        </Link>\n        {/* <AARanoLogo /> */}\n      </div>\n      <div className={styles.qrCode}>\n        {data ? null : (\n          <QrReader\n            onResult={(result, error) => {\n              if (!!result) {\n                setData(result?.text);\n                const qrData = { ...formData, qrCode: result?.text };\n                mutate(qrData);\n              }\n\n              if (!!error) {\n                console.info(error);\n                setErrors({\n                  ...errors,\n                  QrReader: error,\n                });\n              }\n            }}\n            constraints={{\n              facingMode: useFrontCamera ? \"user\" : \"environment\",\n            }}\n            style={{ height: \"100px\", width: \"30%\" }}\n          />\n        )}\n      </div>\n      <div style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}>\n        <button className={styles.btnContainer} onClick={handleCameraSwitch}>\n          Switch Camera ({useFrontCamera ? \"Back\" : \"Front\"})\n        </button>\n      </div>\n\n      {data && (\n        <div className={styles.result}>\n          <h4>\n            Scanned location :<span style={{ color: \"black\" }}> {data}</span>\n          </h4>\n        </div>\n      )}\n      {/* {data && (\n        <button\n          disabled={isLoading ? true : false}\n          className={styles.btnContainer}\n          onClick={submitHandler}\n        >\n          {isLoading ? \"Verifying location...\" : \"Clock Out\"}\n        </button>\n      )} */}\n      {Boolean(isLoading) && <Loader />}\n    </div>\n  );\n};\n\nexport default ClockOut;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"styles_container__B+Po3\",\"qrCode\":\"styles_qrCode__l9wVC\",\"btnContainer\":\"styles_btnContainer__WZKTJ\",\"result\":\"styles_result__uA2DE\",\"logoContainer\":\"styles_logoContainer__UxVta\",\"imgContainer\":\"styles_imgContainer__jjjBQ\",\"home\":\"styles_home__3lA8v\",\"logo\":\"styles_logo__LLS9j\",\"yellow\":\"styles_yellow__aWFoT\"};"],"names":["config","baseURL","axiosInstance","axios","_userClockout","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","data","wrap","_context","prev","next","url","concat","qrCode","long","lat","method","headers","sent","abrupt","stop","apply","arguments","useClockout","queryClient","useQueryClient","_useMutation","useMutation","mutationFn","_x","userClockout","onSuccess","toast","toastOptions","invalidateQueries","queryKeys","onError","error","errorAlert","mutate","isError","isSuccess","reset","_useState","useState","_useState2","_slicedToArray","setFormData","_useState3","_useState4","errors","setErrors","_useState5","_useState6","setData","_useState7","_useState8","useFrontCamera","setUseFrontCamera","_useClockout","isLoading","useIsMutating","navigate","useNavigate","PrivatePaths","useEffect","navigator","geolocation","getCurrentPosition","position","_objectSpread","coords","longitude","toString","latitude","location","_jsxs","className","styles","children","_jsx","Link","to","src","lban","alt","QrReader","onResult","result","text","qrData","console","info","constraints","facingMode","style","height","width","display","justifyContent","onClick","color","Boolean","Loader"],"sourceRoot":""}