{"version":3,"file":"static/js/314.bdba977a.chunk.js","mappings":"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","sources":["modules/Auth/Login/hooks/index.js","modules/Auth/Login/index.js"],"sourcesContent":["import { axiosInstance } from \"../../../../axios-Instance\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../../../context\";\nimport { getLoginToken, setLoginToken } from \"../../../../storage\";\nimport { useMutation, useQuery } from \"@tanstack/react-query\";\nimport { errorAlert, successAlert, toastOptions } from \"../../../../utils\";\nimport { queryKeys } from \"../../../../react-query/constants\";\nimport { toast } from \"react-toastify\";\n\nasync function userLogin(formData) {\n  console.log(formData, \"hook\");\n  const data = await axiosInstance({\n    url: \"/auth\",\n    method: \"POST\",\n    data: formData,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  return data?.data;\n}\n\nasync function getMe() {\n  const data = await axiosInstance({\n    url: \"/auth/me\",\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${getLoginToken()}`,\n    },\n  });\n\n  return data?.data;\n}\n\nexport function useLogin() {\n  const authCtx = useContext(AuthContext);\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userLogin(formData),\n    onSuccess: (data) => {\n      successAlert(\"Login Successful\");\n      setLoginToken(data?.token);\n      authCtx.authenticate(data?.token);\n    },\n    onError: (error) => {\n      errorAlert(error);\n    },\n  });\n  return { mutate, isError, error, isSuccess, reset };\n}\n\nexport function useGetMe() {\n  const fallback = [];\n  const { data = fallback } = useQuery({\n    queryKey: [queryKeys.me],\n    queryFn: () => getMe(),\n    onError: (error) => {\n      toast.error(error, toastOptions);\n    },\n  });\n  return data;\n}\n","import React, { useState } from \"react\";\nimport { Button, FormGroup, Input, PasswordInput } from \"mtforms\";\nimport { Link } from \"react-router-dom\";\nimport { useIsMutating } from \"@tanstack/react-query\";\n\nimport { useLogin } from \"./hooks\";\n\nconst Login = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const { mutate } = useLogin();\n  const isLoading = useIsMutating();\n\n  const handleChange = (name, value) => {\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const validationHandler = (name, error) => {\n    setErrors({ ...errors, [name]: error });\n  };\n\n  const submitHandler = () => {\n    mutate(formData);\n  };\n\n  return (\n    <>\n      <h1>Login</h1>\n      <FormGroup onSubmit={submitHandler}>\n        <Input\n          name=\"email\"\n          label=\"Email Address\"\n          value={formData[\"email\"]}\n          onChange={handleChange}\n          type=\"email\"\n          validationHandler={validationHandler}\n          error={errors.email}\n          required={true}\n          size=\"large\"\n        />\n        <PasswordInput\n          name=\"password\"\n          label=\"Password\"\n          value={formData[\"password\"]}\n          onChange={handleChange}\n          validationHandler={validationHandler}\n          error={errors.password}\n          required={true}\n          size=\"large\"\n        />\n        <Button\n          title=\"login\"\n          size=\"large\"\n          className={isLoading ? \"btn-disabled\" : \"\"}\n          loading={isLoading === 1}\n          disabled={isLoading === 1}\n        />\n      </FormGroup>\n\n      <div className=\"link-wrapper\">\n        <span>Don't have an Account? </span>\n\n        <Link to=\"/register\">Enroll here</Link>\n      </div>\n      <div className=\"link-wrapper\">\n        <span>Forgot your password? </span>\n        <Link to=\"/forgot-Password\">Reset it here</Link>\n      </div>\n    </>\n  );\n};\n\nexport default Login;\n"],"names":["_userLogin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","formData","data","wrap","_context","prev","next","console","log","axiosInstance","url","method","headers","sent","abrupt","stop","apply","arguments","_getMe","_callee2","_context2","Authorization","concat","getLoginToken","useLogin","authCtx","useContext","AuthContext","_useMutation","useMutation","mutationFn","_x","userLogin","onSuccess","successAlert","setLoginToken","token","authenticate","onError","error","errorAlert","mutate","isError","isSuccess","reset","useGetMe","_useQuery","useQuery","queryKey","queryKeys","queryFn","getMe","toast","toastOptions","_useQuery$data","_useState","useState","_useState2","_slicedToArray","setFormData","_useState3","_useState4","errors","setErrors","isLoading","useIsMutating","handleChange","name","value","_objectSpread","_defineProperty","validationHandler","_jsxs","_Fragment","children","_jsx","FormGroup","onSubmit","Input","label","onChange","type","email","required","size","PasswordInput","password","Button","title","className","loading","disabled","Link","to"],"sourceRoot":""}