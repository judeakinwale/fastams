{"version":3,"file":"static/js/315.f0cf545c.chunk.js","mappings":"sKAGO,SAASA,EAAYC,GAKxB,IAJHC,EAAQD,EAARC,SACAC,EAAYF,EAAZE,aACAC,EAAiBH,EAAjBG,kBACAC,EAAMJ,EAANI,OAEA,OACCC,EAAAA,EAAAA,KAACC,EAAAA,EAAW,CAACC,MAAM,gBAAeC,UACjCH,EAAAA,EAAAA,KAACI,EAAAA,GAAK,CACLC,KAAK,QACLC,MAAM,gBACNC,MAAOX,EAAgB,MACvBY,SAAUX,EACVY,KAAK,QACLX,kBAAmBA,EACnBY,MAAOX,EAAOY,MACdC,UAAU,EACVC,KAAK,WAIT,C,gPChB0B,SAAAC,IAWzB,OAXyBA,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA1B,SAAAC,EAA2BtB,GAAQ,IAAAuB,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,GACdC,EAAAA,EAAAA,GAAc,CAC/BC,IAAI,6BAADC,OAA+B9B,EAAgB,MAAC,UAAA8B,OAAS9B,EAAS+B,KAAI,SAAAD,OAAQ9B,EAASgC,KAC1FC,OAAQ,OACRV,KAAM,CAAEW,KAAMlC,EAASkC,MACvBC,QAAS,CACP,eAAgB,yBAEjB,KAAD,EAPQ,OAAJZ,EAAIE,EAAAW,KAAAX,EAAAY,OAAA,SASC,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMA,MAAI,wBAAAE,EAAAa,OAAA,GAAAhB,EAAA,MAClBiB,MAAA,KAAAC,UAAA,CAE8B,SAAAC,IAuC9B,OAvC8BA,GAAAtB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA/B,SAAAqB,EAAgC1C,GAAQ,IAAA2C,EAAApB,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAAiB,EAAAlB,KAAA,EAAAkB,EAAAjB,KAAA,GAGbC,EAAAA,EAAAA,GAAc,CACnCC,IAAI,SAADC,OAAW9B,EAAa,GAAC,UAC5BiC,OAAQ,QACRV,KAAM,CAAEW,KAAMlC,EAASkC,MACvBC,QAAS,CACP,eAAgB,yBAEjB,KAAD,EAPY,KAARQ,EAAQC,EAAAR,OAUsB,MAApBO,EAASE,OAAc,CAAAD,EAAAjB,KAAA,gBAAAiB,EAAAjB,KAAA,GAElBC,EAAAA,EAAAA,GAAc,CAC/BC,IAAI,6BAADC,OAA+B9B,EAAgB,MAAC,UAAA8B,OAAS9B,EAAS+B,KAAI,SAAAD,OAAQ9B,EAASgC,KAC1FC,OAAQ,OACRV,KAAM,CAAEW,KAAMlC,EAASkC,MACvBC,QAAS,CACP,eAAgB,yBAEjB,KAAD,EAPQ,OAAJZ,EAAIqB,EAAAR,KAAAQ,EAAAP,OAAA,SAUC,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMA,MAAI,QAGsB,OAAvCuB,QAAQhC,MAAM,yBAAyB8B,EAAAP,OAAA,SAChC,CACLU,SAAS,EACTjC,MAAO,uCACR,QAAA8B,EAAAjB,KAAA,iBAIoC,MAJpCiB,EAAAlB,KAAA,GAAAkB,EAAAI,GAAAJ,EAAA,SAIHE,QAAQhC,MAAM,SAAU8B,EAAAI,GAAMC,SAASL,EAAAI,GAAA,yBAAAJ,EAAAN,OAAA,GAAAI,EAAA,oBAG1CH,MAAA,KAAAC,UAAA,CAEyB,SAAAU,IAWzB,OAXyBA,GAAA/B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAA1B,SAAA8B,EAA2BnD,GAAQ,IAAAoD,EAAA7B,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAA6B,GAAA,cAAAA,EAAA3B,KAAA2B,EAAA1B,MAAA,cAAA0B,EAAA1B,KAAA,GACdC,EAAAA,EAAAA,GAAc,CAC/BC,IAAI,eAADC,OAAiB9B,GACpBiC,OAAQ,MAERE,QAAS,CACP,eAAgB,sBAEjB,KAAD,EAPQ,OAAJZ,EAAI8B,EAAAjB,KAAAiB,EAAAhB,OAAA,SASC,OAAJd,QAAI,IAAJA,GAAU,QAAN6B,EAAJ7B,EAAMA,YAAI,IAAA6B,OAAN,EAAJA,EAAY7B,MAAI,wBAAA8B,EAAAf,OAAA,GAAAa,EAAA,MACxBZ,MAAA,KAAAC,UAAA,CAyBD,SAAAc,IAbC,OAaDA,GAAAnC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAxBA,SAAAkC,EAA4BvD,GAAQ,IAAAuB,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAgC,GAAA,cAAAA,EAAA9B,KAAA8B,EAAA7B,MAAA,cAAA6B,EAAA7B,KAAA,GACfC,EAAAA,EAAAA,GAAc,CAC/BC,IAAI,8BAADC,OAAgC9B,EAAgB,MAAC,UAAA8B,OAAS9B,EAAS+B,KAAI,SAAAD,OAAQ9B,EAASgC,KAC3FC,OAAQ,QACRV,KAAM,CAAEW,KAAMlC,EAASkC,MACvBC,QAAS,CACP,eAAgB,yBAEjB,KAAD,EAPQ,OAAJZ,EAAIiC,EAAApB,KAAAoB,EAAAnB,OAAA,SASC,OAAJd,QAAI,IAAJA,OAAI,EAAJA,EAAMA,MAAI,wBAAAiC,EAAAlB,OAAA,GAAAiB,EAAA,MAClBhB,MAAA,KAAAC,UAAA,CAeM,SAASiB,IACd,IAAMC,GAAcC,EAAAA,EAAAA,MACdC,GAAWC,EAAAA,EAAAA,MACjBC,GAAqDC,EAAAA,EAAAA,GAAY,CAC/DC,WAAY,SAAChE,GAAQ,OAlGuC,SAEtCiE,GAAA,OAAA/C,EAAAqB,MAAC,KAADC,UAAA,CAgGI0B,CAAYlE,EAAS,EAC/CmE,UAAW,SAAC5C,GACV6C,EAAAA,GAAAA,QAAc,uBAAwBC,EAAAA,IACtCX,EAAYY,kBAAkB,CAACC,EAAAA,EAAAA,UAC/BC,YAAW,WACTZ,EAASa,EAAAA,GAAAA,KACX,GAAG,IACL,EACAC,QAAS,SAAC5D,IACR6D,EAAAA,EAAAA,IAAW7D,EAAOuD,EAAAA,GACpB,IAGF,MAAO,CAAEO,OAdKd,EAANc,OAcSC,QAdMf,EAAPe,QAcU/D,MAdIgD,EAALhD,MAcQgE,UAdQhB,EAATgB,UAcYC,MAdIjB,EAALiB,MAe7C,CAEO,SAASC,IACd,IAAMtB,GAAcC,EAAAA,EAAAA,MACdC,GAAWC,EAAAA,EAAAA,MACjBoB,GAAqDlB,EAAAA,EAAAA,GAAY,CAC/DC,WAAY,SAAChE,GAAQ,OAzGxB,SAE8BkF,GAAA,OAAAzC,EAAAF,MAAC,KAADC,UAAA,CAuGD2C,CAAiBnF,EAAS,EACpDmE,UAAW,SAAC5C,GACV6C,EAAAA,GAAAA,QAAc,uBAAwBC,EAAAA,IACtCX,EAAYY,kBAAkB,CAACC,EAAAA,EAAAA,UAC/BC,YAAW,WACTZ,EAASa,EAAAA,GAAAA,KACX,GAAG,IACL,EACAC,QAAS,SAAC5D,IACR6D,EAAAA,EAAAA,IAAW7D,EAAOuD,EAAAA,GACpB,IAGF,MAAO,CAAEO,OAdKK,EAANL,OAcSC,QAdMI,EAAPJ,QAcU/D,MAdImE,EAALnE,MAcQgE,UAdQG,EAATH,UAcYC,MAdIE,EAALF,MAe7C,CAEO,SAASK,IACd,IAAM1B,GAAcC,EAAAA,EAAAA,MACdC,GAAWC,EAAAA,EAAAA,MACjBwB,GAAqDtB,EAAAA,EAAAA,GAAY,CAC/DC,WAAY,SAAChE,GAAQ,OAvExB,SAC0BsF,GAAA,OAAAhC,EAAAf,MAAC,KAADC,UAAA,CAsEG+C,CAAavF,EAAS,EAChDmE,UAAW,SAAC5C,GACV6C,EAAAA,GAAAA,QAAc,wBAAyBC,EAAAA,IACvCX,EAAYY,kBAAkB,CAACC,EAAAA,EAAAA,UAC/BC,YAAW,WACTZ,EAASa,EAAAA,GAAAA,KACX,GAAG,IACL,EACAC,QAAS,SAAC5D,IACR6D,EAAAA,EAAAA,IAAW7D,EAAOuD,EAAAA,GACpB,IAGF,MAAO,CAAEO,OAdKS,EAANT,OAcSC,QAdMQ,EAAPR,QAcU/D,MAdIuE,EAALvE,MAcQgE,UAdQO,EAATP,UAcYC,MAdIM,EAALN,MAe7C,CACO,SAASS,EAAeC,GAC7B,IACAC,GAA4BC,EAAAA,EAAAA,GAAS,CACnCC,SAAU,CAACrB,EAAAA,EAAAA,KAAgBkB,GAC3BI,QAAS,kBAvGZ,SAEyBC,GAAA,OAAA5C,EAAAX,MAAC,KAADC,UAAA,CAqGPuD,CAAYN,EAAK,EAChCf,QAAS,SAAC5D,GACR,IAEFkF,EAAAN,EANMnE,KAOR,YAPY,IAAAyE,EADK,GACMA,CAQzB,C,wJCVA,UApJiB,WACf,IAAAC,GAAgCC,EAAAA,EAAAA,UAAS,CAAC,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAArCjG,EAAQmG,EAAA,GAAEE,EAAWF,EAAA,GAC5BG,GAA8BJ,EAAAA,EAAAA,UAAS,MAAKK,GAAAH,EAAAA,EAAAA,GAAAE,EAAA,GAArCE,EAAOD,EAAA,GAAEE,EAAUF,EAAA,GAC1BG,GAA4BR,EAAAA,EAAAA,UAAS,CAAC,GAAES,GAAAP,EAAAA,EAAAA,GAAAM,EAAA,GAAjCvG,EAAMwG,EAAA,GAAEC,EAASD,EAAA,GACxBE,GAAwCX,EAAAA,EAAAA,WAAS,GAAMY,GAAAV,EAAAA,EAAAA,GAAAS,EAAA,GAAhDE,EAAYD,EAAA,GAAEE,EAAeF,EAAA,GAC9BG,GAAYC,EAAAA,EAAAA,QAAO,MACzBC,GAAqC/B,EAAAA,EAAAA,MAA7BR,EAAMuC,EAANvC,OAAQE,EAASqC,EAATrC,UAAWC,EAAKoC,EAALpC,MACrBqC,GAAYC,EAAAA,EAAAA,MAGlBC,EAAAA,EAAAA,YAAU,WAEDC,UAAUC,YAMbD,UAAUC,YAAYC,oBACpB,SAACC,GACCrB,GAAWsB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACR3H,GAAQ,IACX+B,KAAM2F,EAASE,OAAOC,UAAUC,WAChC9F,IAAK0F,EAASE,OAAOG,SAASD,aAElC,IACA,WACElB,GAASe,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACNxH,GAAM,IACT6H,SAAU,qCAEd,IAlBFpB,GAASe,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACNxH,GAAM,IACT6H,SAAU,iDAqBlB,GAAG,IAGH,IAAMC,GAAUC,EAAAA,EAAAA,cAAY,WAC1B,IAAMC,EAAWlB,EAAUmB,QAAQC,gBAC/BF,GACF1B,EAAW0B,GACX9B,GAAWsB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EACR3H,GAAQ,IACXkC,MAAMoG,EAAAA,EAAAA,IAAcH,EAAU,YAEhCnB,GAAgB,IAChBuB,EAAAA,EAAAA,IAAa,uBAEbC,EAAAA,EAAAA,IAAU,6DAEd,GAAG,CAACvB,EAAWjH,IAgBfyI,GACEC,EAAAA,EAAAA,GAAiB,EACftI,EAAAA,EAAAA,KAACN,EAAAA,EAAY,CACXE,SAAUA,EACVG,OAAQA,EACRD,kBAVoB,SAACO,EAAMK,GAC/B8F,GAASe,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAIxH,GAAM,IAAAwI,EAAAA,EAAAA,GAAA,GAAGlI,EAAOK,IACjC,EASMb,aAfe,SAACQ,EAAME,GAC1B0F,GAAWsB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAC,CAAC,EAAI3H,GAAQ,IAAA2I,EAAAA,EAAAA,GAAA,GAAGlI,EAAOE,IACrC,KAeIP,EAAAA,EAAAA,KAACwI,EAAAA,EAAa,CACZ3B,UAAWA,EACXG,UAAWA,EACXa,QAASA,EACTlB,aAAcA,EACd8B,kBA1BoB,SAACC,GACzB9B,GAAgB,EAClB,EAyBMR,QAASA,EACTxG,SAAUA,MAfR+I,EAAKN,EAALM,MAAOC,EAAgBP,EAAhBO,iBAAkBC,EAAIR,EAAJQ,KAAMC,EAAWT,EAAXS,YAAaC,EAAUV,EAAVU,WAAYC,EAAIX,EAAJW,KAAMzH,EAAI8G,EAAJ9G,KAmCtE,OAJImD,GACFC,KAIAsE,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA/I,SAAA,EACEH,EAAAA,EAAAA,KAAA,MAAAG,SAAI,eACJ8I,EAAAA,EAAAA,MAACE,EAAAA,GAAS,CAACC,SAnBO,WACpB,IAAKL,EAAY,OAAOxH,IACnB3B,EAASkC,KAOd0C,EAAO5E,IANLwI,EAAAA,EAAAA,IAAU,+FAOd,EASuCjI,SAAA,EACjC8I,EAAAA,EAAAA,MAAA,OACEI,MAAO,CACL/B,SAAU,WACVgC,IAAK,QACLC,MAAO,SACPpJ,SAAA,CAEDyI,EAAmB,EAAE,MAAID,EAAMa,UAEjCX,GACDI,EAAAA,EAAAA,MAAA,OACEI,MAAO,CACLI,UAAW,OACXC,QAAS,OACTC,cAAe,SACfC,IAAK,SACLzJ,SAAA,EAEFH,EAAAA,EAAAA,KAAC6J,EAAAA,GAAM,CACL3J,MAAO6I,EAAa,SAAW,OAC/BlI,KAAK,QACLJ,KAAK,SACLqJ,UAAW9C,EAAY,eAAiB,GACxC+C,QAAuB,IAAd/C,EACTgD,SAAwB,IAAdhD,KAEV8B,IACA9I,EAAAA,EAAAA,KAAC6J,EAAAA,GAAM,CACL3J,MAAM,OACNW,KAAK,QACLoJ,QAASjB,EACTvI,KAAK,SACLqJ,UAAW9C,EAAY,eAAiB,sBAOtD,C,oEC7JO,SAAS/G,EAAWN,GAAuB,IAApBO,EAAKP,EAALO,MAAOC,EAAQR,EAARQ,SACpC,OACC8I,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA/I,SAAA,EACCH,EAAAA,EAAAA,KAAA,MACCqJ,MAAO,CAAEa,UAAW,OAAQC,OAAQ,EAAGC,aAAc,QAASjK,SAE7DD,KAEFF,EAAAA,EAAAA,KAAAkJ,EAAAA,SAAA,CAAA/I,SAAGA,MAGN,C,yGCLO,SAASqI,EAAa7I,GASzB,IACE0K,EATJxD,EAASlH,EAATkH,UACAgB,EAAOlI,EAAPkI,QACAlB,EAAYhH,EAAZgH,aACA8B,EAAiB9I,EAAjB8I,kBACArC,EAAOzG,EAAPyG,QACAxG,EAAQD,EAARC,SACA0K,EAAK3K,EAAL2K,MACAnJ,EAAIxB,EAAJwB,KAsDA,OAlDIwF,IACF0D,GACEpB,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA/I,SAAA,CACGmK,IACCrB,EAAAA,EAAAA,MAAA,OAAA9I,SAAA,EACE8I,EAAAA,EAAAA,MAAA,MAAA9I,SAAA,CAAI,MAAQ,OAAJgB,QAAI,IAAJA,OAAI,EAAJA,EAAMoJ,eACdvK,EAAAA,EAAAA,KAAA,KAAAG,SAAG,gFAMPH,EAAAA,EAAAA,KAAA,OAAK8J,UAAU,SAAQ3J,UACrBH,EAAAA,EAAAA,KAACwK,IAAM,CAACC,OAAO,EAAOC,IAAK7D,EAAW8D,iBAAiB,kBAEzD3K,EAAAA,EAAAA,KAAC6J,EAAAA,GAAM,CACL3J,MAAM,UACNO,KAAK,SACL4I,MAAO,CAAEuB,WAAY,SACrBX,QAASpC,SAKZlB,GAAgBP,IACnBiE,GACEpB,EAAAA,EAAAA,MAAAC,EAAAA,SAAA,CAAA/I,SAAA,EACEH,EAAAA,EAAAA,KAAA,OAAK8J,UAAU,SAAQ3J,UACrBH,EAAAA,EAAAA,KAAA,OAAK6K,IAAKzE,EAAS0E,IAAKlL,EAAS2K,gBAEnCvK,EAAAA,EAAAA,KAAC6J,EAAAA,GAAM,CACLR,MAAO,CAAEuB,WAAY,SACrB1K,MAAM,iBACNO,KAAK,SACLwJ,QAASxB,QAKZ9B,GAAiBP,IACpBiE,GACErK,EAAAA,EAAAA,KAAC6J,EAAAA,GAAM,CACLR,MAAO,CAAEuB,WAAY,WACrB1K,MAAM,eACNO,KAAK,SACLwJ,QAASxB,MAKRzI,EAAAA,EAAAA,KAACC,EAAAA,EAAW,CAACC,MAAM,iBAAgBC,SAAEkK,GAC9C,C,+ECjEO,SAAS/B,EAAiBK,GAChC,IAAA9C,GAAgDC,EAAAA,EAAAA,UAAS,GAAEC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAApD+C,EAAgB7C,EAAA,GAAEgF,EAAmBhF,EAAA,GAuB5C,MAAO,CACN6C,iBAAAA,EACAC,KAAMF,EAAMC,GACZD,MAAAA,EACAG,YAAkC,IAArBF,EACbG,WAAYH,IAAqBD,EAAMa,OAAS,EAChDwB,KAVD,SAAcC,GACbF,EAAoBE,EACrB,EASC1J,KA3BD,WACCwJ,GAAoB,SAACG,GACpB,OAAIA,GAAKvC,EAAMa,OAAS,EAAU0B,EAC3BA,EAAI,CACZ,GACD,EAuBClC,KApBD,WACC+B,GAAoB,SAACG,GACpB,OAAIA,GAAK,EAAUA,EACZA,EAAI,CACZ,GACD,EAiBD,C","sources":["modules/Auth/FacialRecognition/Clockin/components/EmailAddress.jsx","modules/Auth/FacialRecognition/Clockin/hooks/index.js","modules/Auth/FacialRecognition/Clockout/index.js","modules/Auth/Register/components/FormWrapper.jsx","modules/Auth/Register/components/PictureUpload.jsx","utils/useMultistepForm.js"],"sourcesContent":["import { Input } from \"mtforms\";\nimport { FormWrapper } from \"../../../Register/components/FormWrapper\";\n\nexport function EmailAddress({\n\tformData,\n\thandleChange,\n\tvalidationHandler,\n\terrors,\n}) {\n\treturn (\n\t\t<FormWrapper title=\"Enter details\">\n\t\t\t<Input\n\t\t\t\tname=\"email\"\n\t\t\t\tlabel=\"Email Address\"\n\t\t\t\tvalue={formData[\"email\"]}\n\t\t\t\tonChange={handleChange}\n\t\t\t\ttype=\"email\"\n\t\t\t\tvalidationHandler={validationHandler}\n\t\t\t\terror={errors.email}\n\t\t\t\trequired={true}\n\t\t\t\tsize=\"large\"\n\t\t\t/>\n\t\t</FormWrapper>\n\t);\n}\n","import { useMutation, useQuery, useQueryClient } from \"@tanstack/react-query\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { axiosInstance } from \"../../../../../axios-Instance\";\nimport { queryKeys } from \"../../../../../react-query/constants\";\nimport { PublicPaths } from \"../../../../../routes/path\";\nimport { errorAlert, toastOptions } from \"../../../../../utils\";\n\nasync function userClockin(formData) {\n  const data = await axiosInstance({\n    url: `/attendance/sign-in?email=${formData[\"email\"]}&long=${formData.long}&lat=${formData.lat}`,\n    method: \"POST\",\n    data: { file: formData.file },\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n\n  return data?.data;\n}\n\nasync function userFirstClockin(formData) {\n  try {\n    // First API call\n    const register = await axiosInstance({\n      url: `/user/${formData[\"id\"]}/image`,\n      method: \"PATCH\",\n      data: { file: formData.file },\n      headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      },\n    });\n\n    // Check if the first API call was successful\n    if (register && register.status === 200) {\n      // Second API call\n      const data = await axiosInstance({\n        url: `/attendance/sign-in?email=${formData[\"email\"]}&long=${formData.long}&lat=${formData.lat}`,\n        method: \"POST\",\n        data: { file: formData.file },\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      });\n\n      // Return data from the second API call\n      return data?.data;\n    } else {\n      // Handle the case where the first API call was not successful\n      console.error(\"First API call failed\");\n      return {\n        success: false,\n        error: \"An error Occured, Please try again\",\n      }; // or throw an error, depending on your requirements\n    }\n  } catch (error) {\n    // Handle errors from both API calls\n    console.error(\"Error:\", error.message);\n    throw error; // or throw an error, depending on your requirements\n  }\n}\n\nasync function userDetails(formData) {\n  const data = await axiosInstance({\n    url: `/user/email/${formData}`,\n    method: \"GET\",\n\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n  });\n\n  return data?.data?.data;\n}\nasync function userClockOut(formData) {\n  const data = await axiosInstance({\n    url: `/attendance/sign-out?email=${formData[\"email\"]}&long=${formData.long}&lat=${formData.lat}`,\n    method: \"PATCH\",\n    data: { file: formData.file },\n    headers: {\n      \"Content-Type\": \"multipart/form-data\",\n    },\n  });\n\n  return data?.data;\n}\n\n// async function getAttendance() {\n//   const data = await axiosInstance({\n//     url: \"/Attendance/UserAttendStatus\",\n//     method: \"GET\",\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//       Authorization: `Bearer ${getLoginToken()}`,\n//     },\n//   });\n\n//   return data?.data;\n// }\n\nexport function useClockIN() {\n  const queryClient = useQueryClient();\n  const navigate = useNavigate();\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userClockin(formData),\n    onSuccess: (data) => {\n      toast.success(\"Clock in successfull\", toastOptions);\n      queryClient.invalidateQueries([queryKeys.clockIn]);\n      setTimeout(() => {\n        navigate(PublicPaths.HOME);\n      }, 3000);\n    },\n    onError: (error) => {\n      errorAlert(error, toastOptions);\n    },\n  });\n\n  return { mutate, isError, error, isSuccess, reset };\n}\n\nexport function useFirstClockIN() {\n  const queryClient = useQueryClient();\n  const navigate = useNavigate();\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userFirstClockin(formData),\n    onSuccess: (data) => {\n      toast.success(\"Clock in successfull\", toastOptions);\n      queryClient.invalidateQueries([queryKeys.clockIn]);\n      setTimeout(() => {\n        navigate(PublicPaths.HOME);\n      }, 3000);\n    },\n    onError: (error) => {\n      errorAlert(error, toastOptions);\n    },\n  });\n\n  return { mutate, isError, error, isSuccess, reset };\n}\n\nexport function useClockOut() {\n  const queryClient = useQueryClient();\n  const navigate = useNavigate();\n  const { mutate, isError, error, isSuccess, reset } = useMutation({\n    mutationFn: (formData) => userClockOut(formData),\n    onSuccess: (data) => {\n      toast.success(\"Clock Out successfull\", toastOptions);\n      queryClient.invalidateQueries([queryKeys.clockIn]);\n      setTimeout(() => {\n        navigate(PublicPaths.HOME);\n      }, 3000);\n    },\n    onError: (error) => {\n      errorAlert(error, toastOptions);\n    },\n  });\n\n  return { mutate, isError, error, isSuccess, reset };\n}\nexport function useUserDetails(user) {\n  const fallback = [];\n  const { data = fallback } = useQuery({\n    queryKey: [queryKeys.user, user],\n    queryFn: () => userDetails(user),\n    onError: (error) => {\n      //   toast.error(error, toastOptions);\n    },\n  });\n  return data;\n}\n","import React, { useCallback, useRef, useState } from \"react\";\nimport { Button, FormGroup } from \"mtforms\";\nimport { useIsMutating } from \"@tanstack/react-query\";\n\nimport { useClockOut } from \"../Clockin/hooks\";\nimport { dataURLtoFile, infoAlert, successAlert } from \"../../../../utils\";\nimport { useMultistepForm } from \"../../../../utils/useMultistepForm\";\nimport { EmailAddress } from \"../Clockin/components/EmailAddress\";\nimport { PictureUpload } from \"../../Register/components/PictureUpload\";\nimport { useEffect } from \"react\";\n\nconst ClockOut = () => {\n  const [formData, setFormData] = useState({});\n  const [picture, setPicture] = useState(null);\n  const [errors, setErrors] = useState({});\n  const [cameraActive, setCameraActive] = useState(false);\n  const webcamRef = useRef(null);\n  const { mutate, isSuccess, reset } = useClockOut();\n  const isLoading = useIsMutating();\n\n  // STUB: for location services\n  useEffect(() => {\n    const getLocation = () => {\n      if (!navigator.geolocation) {\n        setErrors({\n          ...errors,\n          location: \"Geolocation is not supported by your browser\",\n        });\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setFormData({\n              ...formData,\n              long: position.coords.longitude.toString(),\n              lat: position.coords.latitude.toString(),\n            });\n          },\n          () => {\n            setErrors({\n              ...errors,\n              location: \"Unable to retrieve your location\",\n            });\n          }\n        );\n      }\n    };\n    getLocation();\n  }, []);\n\n  // STUB: capture image & deactivate camera\n  const capture = useCallback(() => {\n    const imageSrc = webcamRef.current.getScreenshot();\n    if (imageSrc) {\n      setPicture(imageSrc);\n      setFormData({\n        ...formData,\n        file: dataURLtoFile(imageSrc, \"image\"),\n      });\n      setCameraActive(false);\n      successAlert(`Picture captured!`);\n    } else {\n      infoAlert(`Please wait for camera to load before clicking on capture!`);\n    }\n  }, [webcamRef, formData]);\n\n  // STUB: turn on camera\n  const handleCameraClick = (e) => {\n    setCameraActive(true);\n  };\n\n  const handleChange = (name, value) => {\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const validationHandler = (name, error) => {\n    setErrors({ ...errors, [name]: error });\n  };\n\n  // STUB: multistep form hook\n  const { steps, currentStepIndex, step, isFirstStep, isLastStep, back, next } =\n    useMultistepForm([\n      <EmailAddress\n        formData={formData}\n        errors={errors}\n        validationHandler={validationHandler}\n        handleChange={handleChange}\n      />,\n      <PictureUpload\n        webcamRef={webcamRef}\n        isLoading={isLoading}\n        capture={capture}\n        cameraActive={cameraActive}\n        handleCameraClick={handleCameraClick}\n        picture={picture}\n        formData={formData}\n      />,\n    ]);\n\n  const submitHandler = () => {\n    if (!isLastStep) return next();\n    if (!formData.file) {\n      infoAlert(\n        `No picture found.\n\t\t\t\tPlease click on 'Take Picture' to attach your picture to the form`\n      );\n      return;\n    }\n    mutate(formData);\n  };\n\n  if (isSuccess) {\n    reset();\n  }\n\n  return (\n    <>\n      <h1>Clock Out</h1>\n      <FormGroup onSubmit={submitHandler}>\n        <div\n          style={{\n            position: \"absolute\",\n            top: \".5rem\",\n            right: \".5rem\",\n          }}\n        >\n          {currentStepIndex + 1} / {steps.length}\n        </div>\n        {step}\n        <div\n          style={{\n            marginTop: \"1rem\",\n            display: \"flex\",\n            flexDirection: \"column\",\n            gap: \".5rem\",\n          }}\n        >\n          <Button\n            title={isLastStep ? \"Finish\" : \"Next\"}\n            size=\"large\"\n            type=\"submit\"\n            className={isLoading ? \"btn-disabled\" : \"\"}\n            loading={isLoading === 1}\n            disabled={isLoading === 1}\n          />\n          {!isFirstStep && (\n            <Button\n              title=\"back\"\n              size=\"large\"\n              onClick={back}\n              type=\"button\"\n              className={isLoading ? \"btn-disabled\" : \"btnRedTxt\"}\n            />\n          )}\n        </div>\n      </FormGroup>\n    </>\n  );\n};\n\nexport default ClockOut;\n","export function FormWrapper({ title, children }) {\n\treturn (\n\t\t<>\n\t\t\t<h2\n\t\t\t\tstyle={{ textAlign: \"left\", margin: 0, marginBottom: \"2rem\" }}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</h2>\n\t\t\t<>{children}</>\n\t\t</>\n\t);\n}\n","import { Button } from \"mtforms\";\nimport Webcam from \"react-webcam\";\n\nimport { FormWrapper } from \"./FormWrapper\";\nimport \"./picture-upload.css\";\n\nexport function PictureUpload({\n  webcamRef,\n  capture,\n  cameraActive,\n  handleCameraClick,\n  picture,\n  formData,\n  first,\n  data,\n}) {\n  let output;\n\n  if (cameraActive) {\n    output = (\n      <>\n        {first && (\n          <div>\n            <h3>Hi {data?.first_name}</h3>\n            <p>\n              Please take a picture to setup your Face Recognition for the first\n              time\n            </p>\n          </div>\n        )}\n        <div className=\"webcam\">\n          <Webcam audio={false} ref={webcamRef} screenshotFormat=\"image/jpeg\" />\n        </div>\n        <Button\n          title=\"capture\"\n          type=\"button\"\n          style={{ background: \"black\" }}\n          onClick={capture}\n        />\n      </>\n    );\n  }\n  if (!cameraActive && picture) {\n    output = (\n      <>\n        <div className=\"webcam\">\n          <img src={picture} alt={formData.first_name} />\n        </div>\n        <Button\n          style={{ background: \"black\" }}\n          title=\"retake picture\"\n          type=\"button\"\n          onClick={handleCameraClick}\n        />\n      </>\n    );\n  }\n  if (!cameraActive && !picture) {\n    output = (\n      <Button\n        style={{ background: \"#3c7d5c\" }}\n        title=\"take picture\"\n        type=\"button\"\n        onClick={handleCameraClick}\n      />\n    );\n  }\n\n  return <FormWrapper title=\"Picture Upload\">{output}</FormWrapper>;\n}\n","// NOTE: create hook to manage multistep form\n\nimport { useState } from \"react\";\n\nexport function useMultistepForm(steps) {\n\tconst [currentStepIndex, setCurrentStepIndex] = useState(0);\n\n\t// STUB: go to next form page\n\tfunction next() {\n\t\tsetCurrentStepIndex((i) => {\n\t\t\tif (i >= steps.length - 1) return i;\n\t\t\treturn i + 1;\n\t\t});\n\t}\n\n\t// STUB: go to previous form page\n\tfunction back() {\n\t\tsetCurrentStepIndex((i) => {\n\t\t\tif (i <= 0) return i;\n\t\t\treturn i - 1;\n\t\t});\n\t}\n\n\t// STUB: go to specific form page\n\tfunction goTo(index) {\n\t\tsetCurrentStepIndex(index);\n\t}\n\n\treturn {\n\t\tcurrentStepIndex,\n\t\tstep: steps[currentStepIndex],\n\t\tsteps,\n\t\tisFirstStep: currentStepIndex === 0,\n\t\tisLastStep: currentStepIndex === steps.length - 1,\n\t\tgoTo,\n\t\tnext,\n\t\tback,\n\t};\n}\n"],"names":["EmailAddress","_ref","formData","handleChange","validationHandler","errors","_jsx","FormWrapper","title","children","Input","name","label","value","onChange","type","error","email","required","size","_userClockin","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","axiosInstance","url","concat","long","lat","method","file","headers","sent","abrupt","stop","apply","arguments","_userFirstClockin","_callee2","register","_context2","status","console","success","t0","message","_userDetails","_callee3","_data$data","_context3","_userClockOut","_callee4","_context4","useClockIN","queryClient","useQueryClient","navigate","useNavigate","_useMutation","useMutation","mutationFn","_x","userClockin","onSuccess","toast","toastOptions","invalidateQueries","queryKeys","setTimeout","PublicPaths","onError","errorAlert","mutate","isError","isSuccess","reset","useFirstClockIN","_useMutation2","_x2","userFirstClockin","useClockOut","_useMutation3","_x4","userClockOut","useUserDetails","user","_useQuery","useQuery","queryKey","queryFn","_x3","userDetails","_useQuery$data","_useState","useState","_useState2","_slicedToArray","setFormData","_useState3","_useState4","picture","setPicture","_useState5","_useState6","setErrors","_useState7","_useState8","cameraActive","setCameraActive","webcamRef","useRef","_useClockOut","isLoading","useIsMutating","useEffect","navigator","geolocation","getCurrentPosition","position","_objectSpread","coords","longitude","toString","latitude","location","capture","useCallback","imageSrc","current","getScreenshot","dataURLtoFile","successAlert","infoAlert","_useMultistepForm","useMultistepForm","_defineProperty","PictureUpload","handleCameraClick","e","steps","currentStepIndex","step","isFirstStep","isLastStep","back","_jsxs","_Fragment","FormGroup","onSubmit","style","top","right","length","marginTop","display","flexDirection","gap","Button","className","loading","disabled","onClick","textAlign","margin","marginBottom","output","first","first_name","Webcam","audio","ref","screenshotFormat","background","src","alt","setCurrentStepIndex","goTo","index","i"],"sourceRoot":""}