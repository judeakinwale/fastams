"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[880],{6751:function(t,r,e){e.d(r,{b:function(){return a}});var n={baseURL:"https://impactlife.azurewebsites.net/api/v1"},a=e(1243).Z.create(n)},8424:function(t,r,e){e.d(r,{F_:function(){return K},Io:function(){return A},PU:function(){return F},Qp:function(){return B},Qq:function(){return N},WY:function(){return q},XZ:function(){return E},Y4:function(){return D},_z:function(){return U},ip:function(){return z},m3:function(){return H},vw:function(){return L},w4:function(){return T},zz:function(){return _}});var n=e(4165),a=e(5861),u=e(6751),i=e(2917),o=e(6403),c=e(3418),s=e(8096),l=e(749),d=e(5985),p=e(6414);function f(){return(f=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return h=(0,a.Z)((0,n.Z)().mark((function t(){var r,e,a=arguments;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:new Date,t.next=3,(0,u.b)({url:"/user/absent?date=".concat(r.toISOString()),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 3:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 5:case"end":return t.stop()}}),t)}))),h.apply(this,arguments)}function m(){return(m=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return(v=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(){return(y=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/".concat(r),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/user/admin",method:"POST",data:r,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/attendance",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Z(){return(Z=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return(g=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings/".concat(r),method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return(S=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/settings/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function w(){return(w=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location",method:"POST",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",null===e||void 0===e?void 0:e.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function j(){return(j=(0,a.Z)((0,n.Z)().mark((function t(){var r;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location",method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return r=t.sent,t.abrupt("return",null===r||void 0===r?void 0:r.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return(k=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location/".concat(r.id),method:"PATCH",data:r,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=(0,a.Z)((0,n.Z)().mark((function t(r){var e;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,u.b)({url:"/location/".concat(r),method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat((0,s.KU)())}});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(){var t=(0,i.a)({queryKey:[p.a.attendance],queryFn:function(){return function(){return b.apply(this,arguments)}()},onError:function(t){d.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function T(){var t=(0,i.a)({queryKey:[p.a.user],queryFn:function(){return function(){return f.apply(this,arguments)}()},onError:function(t){d.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,r=(0,i.a)({queryKey:[p.a.user,t.toLocaleDateString()],queryFn:function(){return function(){return h.apply(this,arguments)}(t)},onError:function(t){d.Am.error(t,l.HK)}}),e=r.data;return void 0===e?[]:e}function F(t){var r=(0,i.a)({queryKey:[p.a.user,t],queryFn:function(){return function(t){return m.apply(this,arguments)}(t)}}),e=r.data;return void 0===e?{}:e}function A(){var t=(0,o.NL)(),r=(0,c.D)({mutationFn:function(t){return function(t){return v.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([p.a.user])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function K(){var t=(0,o.NL)(),r=(0,c.D)({mutationFn:function(t){return function(t){return y.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([p.a.user])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function q(){var t=(0,c.D)({mutationFn:function(t){return function(t){return x.apply(this,arguments)}(t)},onError:function(t){(0,l.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}function D(){var t=(0,i.a)({queryKey:[p.a.settings],queryFn:function(){return function(){return Z.apply(this,arguments)}()},onError:function(t){d.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function L(t){var r=(0,i.a)({queryKey:[p.a.settings,t],queryFn:function(){return function(t){return g.apply(this,arguments)}(t)}}),e=r.data;return{data:void 0===e?{}:e,isSuccess:r.isSuccess}}function B(){var t=(0,o.NL)(),r=(0,c.D)({mutationFn:function(t){return function(t){return S.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([p.a.settings])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function U(){var t=(0,i.a)({queryKey:[p.a.location],queryFn:function(){return function(){return j.apply(this,arguments)}()},onError:function(t){d.Am.error(t,l.HK)}}),r=t.data;return void 0===r?[]:r}function H(){var t=(0,c.D)({mutationFn:function(t){return function(t){return w.apply(this,arguments)}(t)},onSuccess:function(){(0,l.Cq)("Location added Successfully")},onError:function(t){(0,l.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}function N(){var t=(0,o.NL)(),r=(0,c.D)({mutationFn:function(t){return function(t){return k.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([p.a.location])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}function _(){var t=(0,o.NL)(),r=(0,c.D)({mutationFn:function(t){return function(t){return C.apply(this,arguments)}(t)},onSuccess:function(r){t.invalidateQueries([p.a.location])}});return{mutate:r.mutate,isSuccess:r.isSuccess,reset:r.reset,isError:r.isError,error:r.error}}},3233:function(t,r,e){e.d(r,{n:function(){return a}});var n=e(184);function a(t){var r=t.title,e=t.children;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{style:{textAlign:"left",margin:0,marginBottom:"2rem"},children:r}),(0,n.jsx)(n.Fragment,{children:e})]})}},5317:function(t,r,e){e.d(r,{s:function(){return c}});var n=e(5043),a=e(97),u=e.n(a),i=e(3233),o=e(184);function c(t){var r,e=t.webcamRef,a=t.capture,c=t.cameraActive,s=t.handleCameraClick,l=t.picture,d=t.formData;return c&&(r=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"webcam",children:(0,o.jsx)(u(),{audio:!1,ref:e,screenshotFormat:"image/jpeg"})}),(0,o.jsx)(n.zx,{title:"capture",type:"button",style:{background:"black"},onClick:a})]})),!c&&l&&(r=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"webcam",children:(0,o.jsx)("img",{src:l,alt:d.first_name})}),(0,o.jsx)(n.zx,{style:{background:"black"},title:"retake picture",type:"button",onClick:s})]})),c||l||(r=(0,o.jsx)(n.zx,{style:{background:"#3c7d5c"},title:"take picture",type:"button",onClick:s})),(0,o.jsx)(i.n,{title:"Picture Upload",children:r})}},6880:function(t,r,e){e.r(r),e.d(r,{default:function(){return k}});var n=e(4942),a=e(1413),u=e(9439),i=e(2791),o=e(5043),c=e(3722),s=e(4165),l=e(5861),d=e(7689),p=e(6751),f=e(3418),h=e(749);function m(){return(m=(0,l.Z)((0,s.Z)().mark((function t(r){var e,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,Object.keys(r).forEach((function(t){e.append(t,r[t])})),t.next=4,(0,p.b)({url:"/user",method:"POST",data:e,headers:{"Content-Type":"multipart/form-data"}});case 4:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){(0,d.s0)();var t=(0,f.D)({mutationFn:function(t){return function(t){return m.apply(this,arguments)}(t)},onSuccess:function(){(0,h.Cq)("Registration Successful")},onError:function(t){(0,h.sD)(t)}});return{mutate:t.mutate,isError:t.isError,error:t.error,isSuccess:t.isSuccess,reset:t.reset,data:t.data}}var y=e(6800),x=e(8424),b=e(3233),Z=e(184);function g(t){var r=t.formData,e=t.handleChange,n=t.validationHandler,a=t.errors,u=(0,x._z)().data;return(0,Z.jsxs)(b.n,{title:"Contact Info",children:[(0,Z.jsx)(o.II,{name:"first_name",label:"First Name",value:r.first_name,onChange:e,type:"text",validationHandler:n,error:a.first_name,required:!0,size:"large"}),(0,Z.jsx)(o.II,{name:"last_name",label:"Last Name",value:r.last_name,onChange:e,type:"text",validationHandler:n,error:a.last_name,required:!0,size:"large"}),(0,Z.jsx)(o.II,{name:"email",label:"Email Address",value:r.email,onChange:e,type:"email",validationHandler:n,error:a.email,required:!0,size:"large"}),(0,Z.jsx)(o.Ph,{name:"location_id",label:"Location",value:r.location_id,onChange:e,type:"text",validationHandler:n,error:a.location_id,required:!0,data:u,filter:"name",filterValue:"id",size:"large",className:"formInput"})]})}var S=e(5317),w=e(1905),j=e(347),k=function(){var t=(0,i.useState)({}),r=(0,u.Z)(t,2),e=r[0],s=r[1],l=(0,i.useState)(null),p=(0,u.Z)(l,2),f=p[0],m=p[1],x=(0,i.useState)({}),b=(0,u.Z)(x,2),k=b[0],C=b[1],E=(0,i.useState)(""),T=(0,u.Z)(E,2),z=T[0],F=T[1],A=(0,i.useState)(!1),K=(0,u.Z)(A,2),q=K[0],D=K[1],L=(0,i.useState)(!1),B=(0,u.Z)(L,2),U=B[0],H=B[1],N=(0,i.useRef)(null),_=v(),P=_.mutate,I=_.isSuccess,G=_.reset,Q=_.data,O=(0,c.B)(),R=(0,d.s0)(),M=(0,i.useCallback)((function(){var t=N.current.getScreenshot();t?(m(t),s((0,a.Z)((0,a.Z)({},e),{},{file:(0,h.v9)(t,"image")})),D(!1),(0,h.Cq)("Picture captured!")):(0,h.ll)("Please wait for camera to load before clicking on capture!")}),[N,e]),Y=(0,y.h)([(0,Z.jsx)(g,{formData:e,errors:k,validationHandler:function(t,r){C((0,a.Z)((0,a.Z)({},k),{},(0,n.Z)({},t,r)))},handleChange:function(t,r){s((0,a.Z)((0,a.Z)({},e),{},(0,n.Z)({},t,r)))}}),(0,Z.jsx)(S.s,{webcamRef:N,isLoading:O,capture:M,cameraActive:q,handleCameraClick:function(t){D(!0)},picture:f,formData:e})]),V=Y.steps,W=Y.currentStepIndex,X=Y.step,$=Y.isFirstStep,J=Y.isLastStep,tt=Y.back,rt=Y.next;return I&&(G(),H(!0),F(null===Q||void 0===Q?void 0:Q.data.qr_code_b64)),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("h1",{children:"Let's get you started!"}),U?(0,Z.jsxs)("div",{children:[(0,Z.jsx)("h2",{children:"This is the QR image generated for you kindly save it"}),(0,Z.jsx)(w.Z,{base64String:z}),(0,Z.jsxs)("div",{style:{width:"40%",marginLeft:"30%"},children:[" ",(0,Z.jsx)("button",{className:"btn btnYellow",onClick:function(){R(j.Ot.HOME)},children:"Go Home"})]})]}):(0,Z.jsxs)(o.cw,{onSubmit:function(){if(!J)return rt();e.file?P(e):(0,h.ll)("No picture found.\n\t\t\t\tPlease click on 'Take Picture' to attach your picture to the form")},children:[(0,Z.jsxs)("div",{style:{position:"absolute",top:".5rem",right:".5rem"},children:[W+1," / ",V.length]}),X,(0,Z.jsxs)("div",{style:{marginTop:"1rem",display:"flex",flexDirection:"column",gap:".5rem"},children:[(0,Z.jsx)(o.zx,{title:J?"Finish":"Next",size:"large",type:"submit",className:O?"btn-disabled":"",loading:1===O,disabled:1===O}),!$&&(0,Z.jsx)(o.zx,{title:"back",size:"large",onClick:tt,type:"button",className:O?"btn-disabled":"btnRedTxt"})]})]})]})}},6800:function(t,r,e){e.d(r,{h:function(){return u}});var n=e(9439),a=e(2791);function u(t){var r=(0,a.useState)(0),e=(0,n.Z)(r,2),u=e[0],i=e[1];return{currentStepIndex:u,step:t[u],steps:t,isFirstStep:0===u,isLastStep:u===t.length-1,goTo:function(t){i(t)},next:function(){i((function(r){return r>=t.length-1?r:r+1}))},back:function(){i((function(t){return t<=0?t:t-1}))}}}},3722:function(t,r,e){e.d(r,{B:function(){return s}});var n=e(9439),a=e(2791),u=e(7413),i=e(3734),o=e(9538),c=e(6403);function s(t,r,e){var s=(0,i.cb)(t,r,e),l=(0,n.Z)(s,2),d=l[0],p=l[1],f=void 0===p?{}:p,h=(0,c.NL)({context:f.context}),m=h.getMutationCache();return(0,u.$)(a.useCallback((function(t){return m.subscribe(o.V.batchCalls(t))}),[m]),(function(){return h.isMutating(d)}),(function(){return h.isMutating(d)}))}}}]);
//# sourceMappingURL=880.af47144a.chunk.js.map