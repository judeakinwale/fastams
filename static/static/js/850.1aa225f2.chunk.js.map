{"version":3,"file":"static/js/850.1aa225f2.chunk.js","mappings":"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","sources":["modules/QRCode/Clockin/index.js","webpack://amsweb/./src/modules/QRCode/Clockin/styles.module.css?9b4e"],"sourcesContent":["import { useIsMutating } from \"@tanstack/react-query\";\nimport React, { useEffect, useState } from \"react\";\nimport { QrReader } from \"react-qr-reader\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { PrivatePaths } from \"../../../routes/path\";\nimport { useClockin } from \"./hooks\";\nimport styles from \"./styles.module.css\";\nimport logo from \"../../../assets/logo.jpeg\";\nimport { Loader } from \"../../../components\";\n\nconst Clockin = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [data, setData] = useState(null);\n  const [useFrontCamera, setUseFrontCamera] = useState(false);\n\n  const { mutate, reset, isSuccess, isError } = useClockin();\n  const isLoading = useIsMutating();\n  const navigate = useNavigate();\n\n  const handleCameraSwitch = () => {\n    setUseFrontCamera(!useFrontCamera);\n    setData(null);\n\n    setErrors({});\n  };\n\n  const submitHandler = () => {\n    const qrData = { ...formData, qrCode: data };\n\n    mutate(qrData);\n  };\n\n  if (isSuccess) {\n    reset();\n    navigate(PrivatePaths.HOME);\n  }\n\n  if (isError) {\n    navigate(PrivatePaths.HOME);\n  }\n\n  useEffect(() => {\n    const getLocation = () => {\n      if (!navigator.geolocation) {\n        setErrors({\n          ...errors,\n          location: \"Geolocation is not supported by your browser\",\n        });\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setFormData({\n              ...formData,\n              long: position.coords.longitude.toString(),\n              lat: position.coords.latitude.toString(),\n            });\n          },\n          () => {\n            setErrors({\n              ...errors,\n              location: \"Unable to retrieve your location\",\n            });\n          }\n        );\n      }\n    };\n    getLocation();\n  }, [errors, formData]);\n\n  if (!formData[\"lat\"] || !formData[\"long\"]) {\n    return <h1>Please turn on your location</h1>;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.logoContainer}>\n        <Link to={PrivatePaths.HOME}>\n          <img src={logo} alt=\"logo\" />\n        </Link>\n        {/* <AARanoLogo /> */}\n      </div>\n\n      <div className={styles.qrCode}>\n        {data ? null : (\n          <QrReader\n            onResult={(result, error) => {\n              if (!!result) {\n                console.log(result, \"result\");\n                setData(result?.text);\n                const qrData = { ...formData, qrCode: result?.text };\n                mutate(qrData);\n              }\n\n              if (!!error) {\n                console.info(error);\n                setErrors({\n                  ...errors,\n                  QrReader: error,\n                });\n              }\n            }}\n            constraints={{\n              facingMode: useFrontCamera ? \"user\" : \"environment\",\n            }}\n            style={{ height: \"100px\", width: \"30%\" }}\n          />\n        )}\n\n        <div\n          style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}\n        >\n          <button className={styles.btnContainer} onClick={handleCameraSwitch}>\n            Switch Camera ({useFrontCamera ? \"Back\" : \"Front\"})\n          </button>\n        </div>\n      </div>\n\n      {data && (\n        <div className={styles.result}>\n          <h4>\n            Scanned code :<span style={{ color: \"black\" }}> {data}</span>\n          </h4>\n        </div>\n      )}\n      {Boolean(isLoading) && <Loader />}\n      {/* {data && (\n        <button\n          disabled={isLoading ? true : false}\n          className={styles.btnContainer}\n          onClick={submitHandler}\n        >\n          {isLoading ? \"Verifying ...\" : \"Clock In\"}\n        </button>\n      )} */}\n    </div>\n  );\n};\n\nexport default Clockin;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"styles_container__B+Po3\",\"qrCode\":\"styles_qrCode__l9wVC\",\"btnContainer\":\"styles_btnContainer__WZKTJ\",\"result\":\"styles_result__uA2DE\",\"logoContainer\":\"styles_logoContainer__UxVta\",\"imgContainer\":\"styles_imgContainer__jjjBQ\",\"home\":\"styles_home__3lA8v\",\"logo\":\"styles_logo__LLS9j\",\"yellow\":\"styles_yellow__aWFoT\"};"],"names":["_useState","useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","errors","setErrors","_useState5","_useState6","data","setData","_useState7","_useState8","useFrontCamera","setUseFrontCamera","_useClockin","useClockin","mutate","reset","isSuccess","isError","isLoading","useIsMutating","navigate","useNavigate","PrivatePaths","useEffect","navigator","geolocation","getCurrentPosition","position","_objectSpread","long","coords","longitude","toString","lat","latitude","location","_jsxs","className","styles","children","_jsx","Link","to","src","logo","alt","QrReader","onResult","result","error","console","log","text","qrData","qrCode","info","constraints","facingMode","style","height","width","display","justifyContent","onClick","color","Boolean","Loader"],"sourceRoot":""}