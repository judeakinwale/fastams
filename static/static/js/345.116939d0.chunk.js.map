{"version":3,"file":"static/js/345.116939d0.chunk.js","mappings":"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","sources":["modules/QRCode/Clockout/index.js","webpack://amsweb/./src/modules/QRCode/Clockin/styles.module.css?9b4e"],"sourcesContent":["import { useIsMutating } from \"@tanstack/react-query\";\nimport React, { useEffect, useState } from \"react\";\nimport { QrReader } from \"react-qr-reader\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { PrivatePaths } from \"../../../routes/path\";\n\nimport lban from \"../../../assets/logo.jpeg\";\nimport styles from \"../Clockin/styles.module.css\";\nimport { useClockout } from \"./hooks\";\nimport { Loader } from \"../../../components\";\n\nconst ClockOut = () => {\n  const [formData, setFormData] = useState({});\n  const [errors, setErrors] = useState({});\n  const [data, setData] = useState(null);\n  const [useFrontCamera, setUseFrontCamera] = useState(false);\n  const { mutate, reset, isSuccess, isError } = useClockout();\n\n  const isLoading = useIsMutating();\n  const navigate = useNavigate();\n\n  const handleCameraSwitch = () => {\n    setUseFrontCamera(!useFrontCamera);\n    setData(null);\n\n    setErrors({});\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const qrData = { ...formData, qrCode: data };\n    mutate(qrData);\n    console.log(qrData);\n  };\n\n  if (isSuccess) {\n    reset();\n    navigate(PrivatePaths.HOME);\n  }\n\n  if (isError) {\n    navigate(PrivatePaths.HOME);\n  }\n\n  useEffect(() => {\n    const getLocation = () => {\n      if (!navigator.geolocation) {\n        setErrors({\n          ...errors,\n          location: \"Geolocation is not supported by your browser\",\n        });\n      } else {\n        navigator.geolocation.getCurrentPosition(\n          (position) => {\n            setFormData({\n              ...formData,\n              long: position.coords.longitude.toString(),\n              lat: position.coords.latitude.toString(),\n            });\n          },\n          () => {\n            setErrors({\n              ...errors,\n              location: \"Unable to retrieve your location\",\n            });\n          }\n        );\n      }\n    };\n    getLocation();\n  }, []);\n\n  if (!formData[\"lat\"] || !formData[\"long\"]) {\n    return <h1>Please turn on your location</h1>;\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.logoContainer}>\n        <Link to={PrivatePaths.HOME}>\n          <img src={lban} alt=\"logo\" />\n        </Link>\n        {/* <AARanoLogo /> */}\n      </div>\n      <div className={styles.qrCode}>\n        {data ? null : (\n          <QrReader\n            onResult={(result, error) => {\n              if (!!result) {\n                setData(result?.text);\n                const qrData = { ...formData, qrCode: result?.text };\n                mutate(qrData);\n              }\n\n              if (!!error) {\n                console.info(error);\n                setErrors({\n                  ...errors,\n                  QrReader: error,\n                });\n              }\n            }}\n            constraints={{\n              facingMode: useFrontCamera ? \"user\" : \"environment\",\n            }}\n            style={{ height: \"100px\", width: \"30%\" }}\n          />\n        )}\n      </div>\n      <div style={{ display: \"flex\", justifyContent: \"center\", width: \"100%\" }}>\n        <button className={styles.btnContainer} onClick={handleCameraSwitch}>\n          Switch Camera ({useFrontCamera ? \"Back\" : \"Front\"})\n        </button>\n      </div>\n\n      {data && (\n        <div className={styles.result}>\n          <h4>\n            Scanned location :<span style={{ color: \"black\" }}> {data}</span>\n          </h4>\n        </div>\n      )}\n      {/* {data && (\n        <button\n          disabled={isLoading ? true : false}\n          className={styles.btnContainer}\n          onClick={submitHandler}\n        >\n          {isLoading ? \"Verifying location...\" : \"Clock Out\"}\n        </button>\n      )} */}\n      {Boolean(isLoading) && <Loader />}\n    </div>\n  );\n};\n\nexport default ClockOut;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"styles_container__RVGrN\",\"qrCode\":\"styles_qrCode__FJcY9\",\"btnContainer\":\"styles_btnContainer__Y+x48\",\"result\":\"styles_result__cClFz\",\"logoContainer\":\"styles_logoContainer__WXKwx\",\"imgContainer\":\"styles_imgContainer__wVU7Q\",\"home\":\"styles_home__88Rxu\",\"logo\":\"styles_logo__ssNjd\",\"yellow\":\"styles_yellow__LEfp9\"};"],"names":["_useState","useState","_useState2","_slicedToArray","formData","setFormData","_useState3","_useState4","errors","setErrors","_useState5","_useState6","data","setData","_useState7","_useState8","useFrontCamera","setUseFrontCamera","_useClockout","useClockout","mutate","reset","isSuccess","isError","isLoading","useIsMutating","navigate","useNavigate","PrivatePaths","useEffect","navigator","geolocation","getCurrentPosition","position","_objectSpread","long","coords","longitude","toString","lat","latitude","location","_jsxs","className","styles","children","_jsx","Link","to","src","lban","alt","QrReader","onResult","result","error","text","qrData","qrCode","console","info","constraints","facingMode","style","height","width","display","justifyContent","onClick","color","Boolean","Loader"],"sourceRoot":""}