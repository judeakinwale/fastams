"use strict";(self.webpackChunkamsweb=self.webpackChunkamsweb||[]).push([[836],{6751:function(t,e,n){n.d(e,{b:function(){return r}});var o={baseURL:"https://impactlife.azurewebsites.net/api/v1"},r=n(1243).Z.create(o)},1836:function(t,e,n){n.r(e),n.d(e,{default:function(){return w}});var o=n(1413),r=n(9439),s=n(3722),i=n(2791),a=n(7063),l=n(7689),c=n(1087),u=n(347),d=n(3348),f=n(2267),h=n(4165),_=n(5861),v=n(6751),Z=n(6403),g=n(3418),m=n(749),y=n(5985),C=n(6414);function j(){return(j=(0,_.Z)((0,h.Z)().mark((function t(e){var n;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,v.b)({url:"/attendance/sign-out-qr?content=".concat(e.qrCode,"&long=").concat(e.long,"&lat=").concat(e.lat),method:"POST",headers:{"Content-Type":"multipart/form-data"}});case 2:return n=t.sent,t.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){var t=(0,Z.NL)(),e=(0,g.D)({mutationFn:function(t){return function(t){return j.apply(this,arguments)}(t)},onSuccess:function(e){y.Am.success("Clock Out successfull",m.HK),t.invalidateQueries([C.a.clockIn])},onError:function(t){(0,m.sD)(t,m.HK)}});return{mutate:e.mutate,isError:e.isError,error:e.error,isSuccess:e.isSuccess,reset:e.reset}}var x=n(575),b=n(184),w=function(){var t=(0,i.useState)({}),e=(0,r.Z)(t,2),n=e[0],h=e[1],_=(0,i.useState)({}),v=(0,r.Z)(_,2),Z=v[0],g=v[1],m=(0,i.useState)(null),y=(0,r.Z)(m,2),C=y[0],j=y[1],w=(0,i.useState)(!1),S=(0,r.Z)(w,2),k=S[0],E=S[1],N=p(),q=N.mutate,B=N.reset,H=N.isSuccess,O=N.isError,T=(0,s.B)(),L=(0,l.s0)();return H&&(B(),L(u.oj.HOME)),O&&L(u.oj.HOME),(0,i.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){h((0,o.Z)((0,o.Z)({},n),{},{long:t.coords.longitude.toString(),lat:t.coords.latitude.toString()}))}),(function(){g((0,o.Z)((0,o.Z)({},Z),{},{location:"Unable to retrieve your location"}))})):g((0,o.Z)((0,o.Z)({},Z),{},{location:"Geolocation is not supported by your browser"}))}),[]),n.lat&&n.long?(0,b.jsxs)("div",{className:f.Z.container,children:[(0,b.jsx)("div",{className:f.Z.logoContainer,children:(0,b.jsx)(c.rU,{to:u.oj.HOME,children:(0,b.jsx)("img",{src:d,alt:"logo"})})}),(0,b.jsx)("div",{className:f.Z.qrCode,children:C?null:(0,b.jsx)(a.T,{onResult:function(t,e){if(t){j(null===t||void 0===t?void 0:t.text);var r=(0,o.Z)((0,o.Z)({},n),{},{qrCode:null===t||void 0===t?void 0:t.text});q(r)}e&&(console.info(e),g((0,o.Z)((0,o.Z)({},Z),{},{QrReader:e})))},constraints:{facingMode:k?"user":"environment"},style:{height:"100px",width:"30%"}})}),(0,b.jsx)("div",{style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,b.jsxs)("button",{className:f.Z.btnContainer,onClick:function(){E(!k),j(null),g({})},children:["Switch Camera (",k?"Back":"Front",")"]})}),C&&(0,b.jsx)("div",{className:f.Z.result,children:(0,b.jsxs)("h4",{children:["Scanned location :",(0,b.jsxs)("span",{style:{color:"black"},children:[" ",C]})]})}),Boolean(T)&&(0,b.jsx)(x.aN,{})]}):(0,b.jsx)("h1",{children:"Please turn on your location"})}},2267:function(t,e){e.Z={container:"styles_container__B+Po3",qrCode:"styles_qrCode__l9wVC",btnContainer:"styles_btnContainer__WZKTJ",result:"styles_result__uA2DE",logoContainer:"styles_logoContainer__UxVta",imgContainer:"styles_imgContainer__jjjBQ",home:"styles_home__3lA8v",logo:"styles_logo__LLS9j",yellow:"styles_yellow__aWFoT"}}}]);
//# sourceMappingURL=836.5f3ae6da.chunk.js.map